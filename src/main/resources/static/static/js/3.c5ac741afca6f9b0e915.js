webpackJsonp([3],{"HO/G":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("a3Yh"),o=a.n(i),n=a("OIbc"),l=a("+J3q"),r={components:{VueCoreImageUpload:n.default},data:function(){var e;return e={imageUrls:[],multipleSelection:[],itemQianKuan:{},kaiPiao:{projectId:"",projectName:""},form:{},form1:{},dialogFormVisible3:!1,dialogFormVisible1:!1,dialogFormVisible:!1,dialogFormVisible2:!1,tableLoading2:!1,nowTab:1,username:"",name:"",uid:"",tableLoading:!1,currentPage:1,totalnum:0,pagesize:10,select_word:"",tableData:[],itemRuKu:{}},o()(e,"tableLoading",!1),o()(e,"itemKaiPiao",{}),o()(e,"itemId",""),o()(e,"mouldData",[]),o()(e,"imageData",[]),o()(e,"upload",""),e},methods:{delMouldImage:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.todelImage(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},imageuploaded:function(e){if("undefined"!==e.url.length&&e.url.length>0){for(var t=e.url,a=this.imageUrls,i=0;i<t.length;i++)a.push(t[i]);this.imageUrls=a}},handleError:function(){this.$notify.error({title:"上传失败",message:"图片上传出现异常"})},handleSelectionChange:function(e){this.multipleSelection=e},quxiao:function(){this.dialogFormVisible=!1},deleteManyEmps:function(){var e=this;this.$confirm("此操作将["+this.multipleSelection.length+"]条订单一并发模, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",a=0;a<e.multipleSelection.length;a++)t+=e.multipleSelection[a].id+",";e.itemId=t,e.toAddFaMoInfo()}).catch(function(){})},toSeeShouMo:function(e){var t=this,a=e.orderId;this.getRequest("/fa/mo/order/famo?orderId="+a).then(function(e){if(e&&200==e.status&&0==e.data.code){var a=e.data.data,i=[];if("undefined"!=a&&a.length>0)for(var o=0;o<a.length;o++){var n,l={};l=a[o],n=(0,t.$options.filters.splitUrl)(a[o].picUrls),l.picUrls=n,i.push(l)}t.mouldData=i,t.dialogFormVisible3=!0}else t.$message.error("获取收模信息失败")})},toAddFaMoInfo:function(e){null!=e&&""!==e&&"undefined"!==e&&(this.itemId=e.id),this.dialogFormVisible=!0,this.form={},this.form.chePai=e.chePai,this.form.jiaShiYuan=e.driverPhone},addFaMoInfo:function(){var e=this,t="";if(""===t||"undefined"===t||null===t){if(""===this.itemId||"undefined"===this.itemId)return void this.$message.error("请选择订单");t=this.itemId}this.form.ids=t,this.form.addUserName=this.name,this.form.addUserId=this.uid;for(var a="",i=0;i<this.imageUrls.length;i++)i==this.imageUrls.length-1?a+=this.imageUrls[i]:a=this.imageUrls[i]+"|"+a;this.form.picUrls=a,this.postRequest("/fa/mo/add/info",this.form).then(function(t){t&&200==t.status&&0==t.data.code?(e.$message.success("执行成功"),e.dialogFormVisible=!1,e.getCollectMouldList()):e.$message.error("执行失败")})},toShenHe:function(e){this.dialogFormVisible=!0,this.itemRuKu=e,this.form.kuFangRemark=""},handleChange:function(e){},toinfo:function(e){this.$router.push("/order/info/"+e)},toadd:function(){this.$router.push("/order/add")},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},getCollectMouldList:function(){var e=this;this.getRequest("/fa/mo/by/status?page="+this.currentPage+"&size="+this.pagesize+"&status=2").then(function(t){e.tableLoading=!1,t&&200==t.status&&0==t.data.code&&(e.tableData=t.data.data.needfamolist,e.totalnum=t.data.data.count)})}},created:function(){this.upload=l.a.upload},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("发模管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("已通过列表")])],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{label:"产品名称",prop:"orderName"}}),e._v(" "),a("el-table-column",{attrs:{label:"发模类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.faMoType+""=="0"?a("el-tag",{attrs:{type:"info"}},[e._v("欠款发模")]):e._e(),e._v(" "),t.row.faMoType+""=="1"?a("el-tag",{attrs:{type:"success"}},[e._v("部分付款发模")]):e._e(),e._v(" "),t.row.faMoType+""=="2"?a("el-tag",{attrs:{type:"warning"}},[e._v("全款发模")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status+""=="0"?a("el-tag",{attrs:{type:"info"}},[e._v("待审核")]):e._e(),e._v(" "),t.row.status+""=="1"?a("el-tag",{attrs:{type:"success"}},[e._v("商务审核通过")]):e._e(),e._v(" "),t.row.status+""=="-1"?a("el-tag",{attrs:{type:"warning"}},[e._v("商务审核未通过")]):e._e(),e._v(" "),t.row.status+""=="2"?a("el-tag",{attrs:{type:"success"}},[e._v("经理审核通过")]):e._e(),e._v(" "),t.row.status+""=="-2"?a("el-tag",{attrs:{type:"danger"}},[e._v("经理审核未通过")]):e._e(),e._v(" "),t.row.status+""=="3"?a("el-tag",{attrs:{type:"success"}},[e._v("发模完成")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发模数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.faMoNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"留厂数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.liuChangNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"等额模具留厂"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.liuChang+""=="true"&&t.row.liuChang+""!=""?a("el-tag",[e._v("有")]):e._e(),e._v(" "),t.row.liuChang+""=="false"||t.row.liuChang+""==""?a("el-tag",[e._v("无")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toAddFaMoInfo(t.row)}}},[e._v("发模")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toSeeShouMo(t.row)}}},[e._v("查看")])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.tableData.length>0?a("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyEmps}},[e._v("批量发模\r\n  ")]):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{title:"发模单",visible:e.dialogFormVisible,width:"60%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"车牌号：",prop:"chePai"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.chePai,callback:function(t){e.$set(e.form,"chePai",t)},expression:"form.chePai"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"驾驶员手机号：",prop:"jiaShiYuan"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.jiaShiYuan,callback:function(t){e.$set(e.form,"jiaShiYuan",t)},expression:"form.jiaShiYuan"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运输情况："}},[a("el-checkbox-group",{model:{value:e.form.kuaiDi,callback:function(t){e.$set(e.form,"kuaiDi",t)},expression:"form.kuaiDi"}},[a("el-checkbox",{attrs:{label:"快递",name:"kuaiDi"}})],1),e._v(" "),a("el-checkbox-group",{model:{value:e.form.muXiang,callback:function(t){e.$set(e.form,"muXiang",t)},expression:"form.muXiang"}},[a("el-checkbox",{attrs:{label:"木箱",name:"type"}})],1),e._v(" "),a("el-checkbox-group",{model:{value:e.form.zhuanChe,callback:function(t){e.$set(e.form,"zhuanChe",t)},expression:"form.zhuanChe"}},[a("el-checkbox",{attrs:{label:"专车",name:"type"}})],1),e._v(" "),a("el-checkbox-group",{model:{value:e.form.huoYun,callback:function(t){e.$set(e.form,"huoYun",t)},expression:"form.huoYun"}},[a("el-checkbox",{attrs:{label:"货运",name:"type"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片："}},[a("div",[a("vue-core-image-upload",{class:["el-button","el-button--primary"],attrs:{crop:!1,inputOfFile:"imageFile",url:e.upload,extensions:"png,gif,jpeg,jpg","max-file-size":5242880,data:e.imageData,text:"上传图片",multiple:!0,"multiple-size":30,credentials:"true"},on:{imageuploaded:e.imageuploaded,errorhandle:e.handleError}})],1)]),e._v(" "),a("div",{staticStyle:{border:"1px dashed #d9d9d9",width:"100%","min-height":"358px"}},[a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},e._l(e.imageUrls,function(t){return a("el-col",{attrs:{span:6}},[a("el-card",{staticClass:"mould-card",attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",staticStyle:{height:"420px"},attrs:{src:t}}),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.delMouldImage(t)}}},[a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})])],1)])],1)}))],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addFaMoInfo}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.quxiao}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{title:"模具详情",visible:e.dialogFormVisible3,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible3=t}}},e._l(this.mouldData,function(t,i){return a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"25px"},attrs:{index:i}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.mouldName)+"---模具信息")])]),e._v(" "),a("div",{staticClass:"form-box"},[a("div",[a("span",[e._v("数量："+e._s(t.mouldNum))])]),e._v(" "),a("div",[a("span",[e._v("备注："+e._s(t.remark))])])]),e._v(" "),a("div",{staticStyle:{border:"1px dashed #d9d9d9",width:"100%","min-height":"358px"}},[a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},e._l(t.picUrls,function(e){return a("el-col",{attrs:{span:6}},[a("el-card",{staticClass:"mould-card",attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",staticStyle:{height:"420px"},attrs:{src:e}})])],1)}))],1)])}))],1)},staticRenderFns:[]};var u=a("Z0/y")(r,s,!1,function(e){a("eIEm")},"data-v-6d0d5af0",null);t.default=u.exports},"Hu+O":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("a3Yh"),o=a.n(i),n={data:function(){var e;return e={itemQianKuan:{},kaiPiao:{projectId:"",projectName:""},form:{},form1:{},dialogFormVisible1:!1,dialogFormVisible:!1,dialogFormVisible2:!1,tableLoading2:!1,nowTab:1,username:"",name:"",uid:"",tableLoading:!1,currentPage:1,totalnum:0,pagesize:10,select_word:"",tableData:[],itemRuKu:{}},o()(e,"tableLoading",!1),o()(e,"itemKaiPiao",{}),e},methods:{quxiao:function(){this.dialogFormVisible=!1},toupdate:function(e){this.itemQianKuan=e,this.dialogFormVisible=!0,this.form=e},updateFaMo:function(){var e=this,t=this;t.itemQianKuan.faMoType+""=="2"||""!==t.form.faMoRemark?(t.tableLoading=!0,this.postRequest("/fa/mo/update",t.form).then(function(a){t.tableLoading=!1,a&&200==a.status&&0==a.data.code?(e.$message.success("执行成功"),e.dialogFormVisible=!1,e.getCollectMouldList()):e.$message.error("执行失败")})):t.$message.error("请填写欠款原因")},toShenHe:function(e){this.dialogFormVisible=!0,this.itemRuKu=e,this.form.kuFangRemark=""},handleChange:function(e){},toinfo:function(e){this.$router.push("/order/info/"+e)},toadd:function(){this.$router.push("/order/add")},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},getCollectMouldList:function(){var e=this;this.getRequest("/fa/mo/wait/listbypage?page="+this.currentPage+"&size="+this.pagesize+"&addUserId="+this.uid).then(function(t){e.tableLoading=!1,t&&200==t.status&&0==t.data.code&&(e.tableData=t.data.data.waitfamolist,e.totalnum=t.data.data.count)})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("发模管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("已提交列表")])],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"产品名称",prop:"orderName"}}),e._v(" "),a("el-table-column",{attrs:{label:"发模类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.faMoType+""=="0"?a("el-tag",{attrs:{type:"info"}},[e._v("欠款发模")]):e._e(),e._v(" "),t.row.faMoType+""=="2"?a("el-tag",{attrs:{type:"warning"}},[e._v("全款发模")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status+""=="0"?a("el-tag",{attrs:{type:"info"}},[e._v("待审核")]):e._e(),e._v(" "),t.row.status+""=="1"?a("el-tag",{attrs:{type:"success"}},[e._v("商务审核通过")]):e._e(),e._v(" "),t.row.status+""=="-1"?a("el-tag",{attrs:{type:"warning"}},[e._v("商务审核未通过")]):e._e(),e._v(" "),t.row.status+""=="2"?a("el-tag",{attrs:{type:"success"}},[e._v("经理审核通过")]):e._e(),e._v(" "),t.row.status+""=="-2"?a("el-tag",{attrs:{type:"danger"}},[e._v("经理审核未通过")]):e._e(),e._v(" "),t.row.status+""=="3"?a("el-tag",{attrs:{type:"success"}},[e._v("发模完成")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发模数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.faMoNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"留厂数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.liuChangNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"等额模具留厂"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.liuChang+""=="true"&&t.row.liuChang+""!=""?a("el-tag",[e._v("有")]):e._e(),e._v(" "),t.row.liuChang+""=="false"||t.row.liuChang+""==""?a("el-tag",[e._v("无")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status+""=="-1"||t.row.status+""=="-2"?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toupdate(t.row)}}},[e._v("重新提交")]):e._e()]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{title:"发模申请",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"车牌号:",prop:"chePai"}},[a("el-input",{model:{value:e.form.chePai,callback:function(t){e.$set(e.form,"chePai",t)},expression:"form.chePai"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"驾驶员手机号:",prop:"driverPhone"}},[a("el-input",{model:{value:e.form.driverPhone,callback:function(t){e.$set(e.form,"driverPhone",t)},expression:"form.driverPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否有等额模具留厂：",prop:"liuChang"}},[a("el-switch",{model:{value:e.form.liuChang,callback:function(t){e.$set(e.form,"liuChang",t)},expression:"form.liuChang"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发模数量：",prop:"faMoNum"}},[a("el-input-number",{attrs:{min:1},on:{change:e.handleChange},model:{value:e.form.faMoNum,callback:function(t){e.$set(e.form,"faMoNum",t)},expression:"form.faMoNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"留厂数量：",prop:"liuChangNum"}},[a("el-input-number",{attrs:{min:0},on:{change:e.handleChange},model:{value:e.form.liuChangNum,callback:function(t){e.$set(e.form,"liuChangNum",t)},expression:"form.liuChangNum"}})],1),e._v(" "),this.itemQianKuan.faMoType+""!="2"?a("el-form-item",{attrs:{label:"欠款原因：",prop:"faMoRemark",required:""}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.faMoRemark,callback:function(t){e.$set(e.form,"faMoRemark",t)},expression:"form.faMoRemark"}})],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.updateFaMo}},[e._v("重新提交")]),e._v(" "),a("el-button",{on:{click:e.quxiao}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var r=a("Z0/y")(n,l,!1,function(e){a("I9OR")},"data-v-2ba043e4",null);t.default=r.exports},I9OR:function(e,t){},T0Wu:function(e,t){},dVi0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("a3Yh"),o=a.n(i),n={data:function(){var e;return e={itemQianKuan:{},kaiPiao:{projectId:"",projectName:""},form:{},form1:{},dialogFormVisible1:!1,dialogFormVisible:!1,dialogFormVisible2:!1,tableLoading2:!1,nowTab:1,username:"",name:"",uid:"",tableLoading:!1,currentPage:1,totalnum:0,pagesize:10,select_word:"",tableData:[],itemRuKu:{}},o()(e,"tableLoading",!1),o()(e,"itemKaiPiao",{}),o()(e,"itemProject",{businessBaoJia:{finalBaoJia:0}}),e},methods:{toOrderinfo:function(e){this.$router.push("/plant/order/info/"+e.id)},toKaiPiao:function(e){this.dialogFormVisible2=!0,this.kaiPiao={},this.itemKaiPiao=e},quxiaoKai:function(){this.dialogFormVisible2=!1,this.kaiPiao={}},addKaiPiao:function(){var e=this,t=this,a=t.kaiPiao;a.projectId=t.itemKaiPiao.projectId,a.projectName=t.itemKaiPiao.projectName,params.addUserId=this.uid,params.addUserName=this.name,t.tableLoading2=!0,this.postRequest("/kai/piao/add",a).then(function(a){t.tableLoading2=!1,a&&200==a.status&&0==a.data.code?(e.$message.success("执行成功"),e.dialogFormVisible2=!1):e.$message.error("执行失败")})},quxiao:function(){this.dialogFormVisible=!1},quxiao1:function(){this.dialogFormVisible1=!1},toqianKuan:function(e){this.itemProject=e.project,this.itemQianKuan=e,this.dialogFormVisible=!0,this.form={addUserId:"",addUserName:"",orderId:"",orderName:"",faMoRemark:"",faMoType:"0",liuChangNum:0,faMoNum:1,liuChang:!1}},tofaMo:function(e){this.itemQianKuan=e,this.dialogFormVisible1=!0,this.form1={addUserId:"",addUserName:"",orderId:"",orderName:"",faMoRemark:"",faMoType:"0",liuChangNum:0,faMoNum:1,liuChang:!1}},zhengchang:function(){var e=this,t=this;t.form1.addUserId=this.uid,t.form1.addUserName=this.name,t.form1.orderId=this.itemQianKuan.id,t.form1.orderName=this.itemQianKuan.orderName,t.form1.faMoType="2",t.tableLoading=!0,this.postRequest("/fa/mo/add",t.form1).then(function(a){t.tableLoading=!1,a&&200==a.status&&0==a.data.code?(e.$message.success("执行成功"),e.dialogFormVisible1=!1,e.getCollectMouldList()):e.$message.error("执行失败")})},qianKuan:function(){var e=this,t=this;""!==t.form.faMoRemark?(t.form.addUserId=this.uid,t.form.addUserName=this.name,t.form.orderId=this.itemQianKuan.id,t.form.orderName=this.itemQianKuan.orderName,t.form.faMoType="0",t.tableLoading=!0,this.postRequest("/fa/mo/add",t.form).then(function(a){t.tableLoading=!1,a&&200==a.status&&0==a.data.code?(e.$message.success("执行成功"),e.dialogFormVisible=!1,e.getCollectMouldList()):e.$message.error("执行失败")})):t.$message.error("请填写欠款原因")},toShenHe:function(e){this.dialogFormVisible=!0,this.itemRuKu=e,this.form.kuFangRemark=""},handleChange:function(e){},toinfo:function(e){this.$router.push("/order/info/"+e)},toadd:function(){this.$router.push("/order/add")},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},getCollectMouldList:function(){var e=this;this.getRequest("/fa/mo/need/listbypage?page="+this.currentPage+"&size="+this.pagesize+"&addUserId="+this.uid+"&storageStatus=2&faMoStatus=0").then(function(t){e.tableLoading=!1,t&&200==t.status&&0==t.data.code&&(console.log(t.data.data.needfamolist),e.tableData=t.data.data.needfamolist,e.totalnum=t.data.data.count)})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("发模管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("申请发模")])],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"产品名称",prop:"orderName"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属项目"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.project.projectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.storageStatus+""=="2"?a("el-tag",{attrs:{type:"danger"}},[e._v("可申请发模")]):e._e(),e._v(" "),t.row.storageStatus+""=="4"?a("el-tag",{attrs:{type:"warning"}},[e._v("发模待审核")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"付款状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.project.financeStatus+""=="0"?a("el-tag",[e._v("待财务审查")]):e._e(),e._v(" "),t.row.project.financeStatus+""=="1"?a("el-tag",{attrs:{type:"danger"}},[e._v("未付款")]):e._e(),e._v(" "),t.row.project.financeStatus+""=="2"?a("el-tag",{attrs:{type:"info"}},[e._v("部分付款")]):e._e(),e._v(" "),t.row.project.financeStatus+""=="3"?a("el-tag",{attrs:{type:"success"}},[e._v("已全款")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"已付款比例"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.project.financeBiLi)+" %")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"已付款金额",prop:"financeJinE"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.project.financeJinE))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开票状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.project.kaiPiaoStatus+""=="0"?a("el-tag",[e._v("未开票")]):e._e(),e._v(" "),t.row.project.kaiPiaoStatus+""=="1"?a("el-tag",{attrs:{type:"info"}},[e._v("待审核")]):e._e(),e._v(" "),t.row.project.kaiPiaoStatus+""=="2"?a("el-tag",{attrs:{type:"danger"}},[e._v("驳回")]):e._e(),e._v(" "),t.row.project.kaiPiaoStatus+""=="3"?a("el-tag",{attrs:{type:"success"}},[e._v("已通过")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.project.financeStatus+""=="3"?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.tofaMo(t.row)}}},[e._v("发模")]):e._e(),e._v(" "),t.row.project.financeStatus+""!="3"?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.toqianKuan(t.row)}}},[e._v("发模")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toOrderinfo(t.row)}}},[e._v("详情")])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{title:"欠款发模申请",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"form-box"},[a("div",{staticStyle:{"margin-top":"5px"}},[e._v("\r\n        到款比例 :"),a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.itemProject.financeBiLi))])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[e._v("\r\n        到款金额 :"),a("el-tag",{attrs:{type:"default"}},[e._v(e._s(e.itemProject.financeJinE))])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[e._v("\r\n        最终优惠价:"),a("el-tag",{attrs:{type:"default"}},[e._v(e._s(e.itemProject.businessBaoJia.finalBaoJia))])],1),e._v(" "),a("div",{staticStyle:{width:"100%",height:"1px","border-top":"1px solid","margin-bottom":"15px"}}),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"车牌号:",prop:"chePai"}},[a("el-input",{model:{value:e.form.chePai,callback:function(t){e.$set(e.form,"chePai",t)},expression:"form.chePai"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"驾驶员手机号:",prop:"driverPhone"}},[a("el-input",{model:{value:e.form.driverPhone,callback:function(t){e.$set(e.form,"driverPhone",t)},expression:"form.driverPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"留厂等额模具：",prop:"liuChang"}},[a("el-switch",{model:{value:e.form.liuChang,callback:function(t){e.$set(e.form,"liuChang",t)},expression:"form.liuChang"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发模数量：",prop:"faMoNum"}},[a("el-input-number",{attrs:{min:1},on:{change:e.handleChange},model:{value:e.form.faMoNum,callback:function(t){e.$set(e.form,"faMoNum",t)},expression:"form.faMoNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"留厂数量：",prop:"liuChangNum"}},[a("el-input-number",{attrs:{min:0},on:{change:e.handleChange},model:{value:e.form.liuChangNum,callback:function(t){e.$set(e.form,"liuChangNum",t)},expression:"form.liuChangNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"欠款原因：",prop:"faMoRemark",required:""}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.faMoRemark,callback:function(t){e.$set(e.form,"faMoRemark",t)},expression:"form.faMoRemark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.qianKuan}},[e._v("提 交")]),e._v(" "),a("el-button",{on:{click:e.quxiao}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{title:"全款发模申请",visible:e.dialogFormVisible1,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form1,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"车牌号:",prop:"chePai"}},[a("el-input",{model:{value:e.form1.chePai,callback:function(t){e.$set(e.form1,"chePai",t)},expression:"form1.chePai"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"驾驶员手机号:",prop:"driverPhone"}},[a("el-input",{model:{value:e.form1.driverPhone,callback:function(t){e.$set(e.form1,"driverPhone",t)},expression:"form1.driverPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否有等额模具留厂：",prop:"liuChang"}},[a("el-switch",{model:{value:e.form1.liuChang,callback:function(t){e.$set(e.form1,"liuChang",t)},expression:"form1.liuChang"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发模数量：",prop:"faMoNum"}},[a("el-input-number",{attrs:{min:1},on:{change:e.handleChange},model:{value:e.form1.faMoNum,callback:function(t){e.$set(e.form1,"faMoNum",t)},expression:"form1.faMoNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"留厂数量：",prop:"liuChangNum"}},[a("el-input-number",{attrs:{min:0},on:{change:e.handleChange},model:{value:e.form1.liuChangNum,callback:function(t){e.$set(e.form1,"liuChangNum",t)},expression:"form1.liuChangNum"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.zhengchang}},[e._v("提 交")]),e._v(" "),a("el-button",{on:{click:e.quxiao1}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var r=a("Z0/y")(n,l,!1,function(e){a("fKWu")},"data-v-573545aa",null);t.default=r.exports},eIEm:function(e,t){},fKWu:function(e,t){},oNtt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("a3Yh"),o=a.n(i),n={data:function(){var e;return e={multipleSelection:[],itemQianKuan:{},kaiPiao:{projectId:"",projectName:""},form:{},form1:{},dialogFormVisible1:!1,dialogFormVisible:!1,dialogFormVisible2:!1,tableLoading2:!1,nowTab:1,username:"",name:"",uid:"",tableLoading:!1,currentPage:1,totalnum:0,pagesize:10,select_word:"",tableData:[],itemRuKu:{}},o()(e,"tableLoading",!1),o()(e,"itemKaiPiao",{}),o()(e,"itemId",""),e},methods:{handleSelectionChange:function(e){this.multipleSelection=e},toinfo:function(e){this.$router.push("/plant/order/info/"+e.orderId)},quxiao:function(){this.dialogFormVisible=!1},deleteManyEmps:function(){var e=this;this.$confirm("此操作将["+this.multipleSelection.length+"]条订单一并发模, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",a=0;a<e.multipleSelection.length;a++)t+=e.multipleSelection[a].id+",";e.itemId=t,e.toAddFaMoInfo()}).catch(function(){})},toAddFaMoInfo:function(e){null!=e&&""!==e&&"undefined"!==e&&(this.itemId=e.id),this.dialogFormVisible=!0,this.form={},this.form.chePai=e.chePai,this.form.jiaShiYuan=e.driverPhone},addFaMoInfo:function(){var e=this,t={id:this.itemId,cheJian:this.uid};this.itemId;this.postRequest("/fa/mo/que/ren",t).then(function(t){t&&200==t.status&&0==t.data.code?(e.$message.success("执行成功"),e.dialogFormVisible=!1,e.getCollectMouldList()):e.$message.error("执行失败")})},toShenHe:function(e){this.dialogFormVisible=!0,this.itemRuKu=e,this.form.kuFangRemark=""},handleChange:function(e){},toadd:function(){this.$router.push("/order/add")},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},getCollectMouldList:function(){var e=this;this.getRequest("/fa/mo/listbypage?page="+this.uid+"&size="+this.pagesize+"&status=3").then(function(t){e.tableLoading=!1,t&&200==t.status&&0==t.data.code&&(e.tableData=t.data.data.famolist,e.totalnum=t.data.data.count)})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("发模管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("车间确认列表")])],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{label:"产品名称",prop:"orderName"}}),e._v(" "),a("el-table-column",{attrs:{label:"发模类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.faMoType+""=="0"?a("el-tag",{attrs:{type:"info"}},[e._v("欠款发模")]):e._e(),e._v(" "),t.row.faMoType+""=="1"?a("el-tag",{attrs:{type:"success"}},[e._v("部分付款发模")]):e._e(),e._v(" "),t.row.faMoType+""=="2"?a("el-tag",{attrs:{type:"warning"}},[e._v("全款发模")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发模数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.faMoNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"留厂数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.liuChangNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"等额模具留厂"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.liuChang+""=="true"&&t.row.liuChang+""!=""?a("el-tag",[e._v("有")]):e._e(),e._v(" "),t.row.liuChang+""=="false"||t.row.liuChang+""==""?a("el-tag",[e._v("无")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.cheJian+""==""?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toAddFaMoInfo(t.row)}}},[e._v("确认发模完成")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){e.toinfo(t.row)}}},[e._v("详情")])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{title:"确认发模完成",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addFaMoInfo}},[e._v("确认")]),e._v(" "),a("el-button",{on:{click:e.quxiao}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var r=a("Z0/y")(n,l,!1,function(e){a("skNs")},"data-v-1f486abd",null);t.default=r.exports},rpUC:function(e,t,a){var i={"./FaMoAudit.vue":"wKy2","./FaMoCheJian.vue":"oNtt","./FaMoList.vue":"dVi0","./FaMoOver.vue":"HO/G","./FaMoWait.vue":"Hu+O"};function o(e){return a(n(e))}function n(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id="rpUC"},skNs:function(e,t){},wKy2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("a3Yh"),o=a.n(i),n={data:function(){return o()({itemQianKuan:{},form:{addUserId:"",addUserName:"",orderId:"",orderName:"",faMoRemark:"",faMoType:"0"},form1:{addUserId:"",addUserName:"",orderId:"",orderName:"",faMoRemark:"",faMoType:"0"},dialogFormVisible1:!1,dialogFormVisible:!1,nowTab:1,username:"",name:"",uid:"",tableLoading:!1,currentPage:1,totalnum:0,pagesize:10,select_word:"",tableData:[],itemRuKu:{}},"tableLoading",!1)},methods:{toOrderinfo:function(e){this.$router.push("/plant/order/info/"+e.id)},quxiao:function(){this.dialogFormVisible=!1},quxiao1:function(){this.dialogFormVisible1=!1},toqianKuan:function(e){this.itemQianKuan=e,this.dialogFormVisible=!0,this.form={}},zhengchang:function(){var e=this,t=this;t.form.addUserId=this.uid,t.form.addUserName=this.name,t.form.orderId=this.itemQianKuan.id,t.form.orderName=this.itemQianKuan.orderName,t.form.faMoType="2",t.tableLoading=!0,this.postRequest("/fa/mo/add",t.form).then(function(a){t.tableLoading=!1,a&&200==a.status&&0==a.data.code?(e.$message.success("执行成功"),e.dialogFormVisible=!1,e.getCollectMouldList()):e.$message.error("执行失败")})},qianKuan:function(){var e=this,t=this;t.form.addUserId=this.uid,t.form.addUserName=this.name,t.form.orderId=this.itemQianKuan.id,t.form.orderName=this.itemQianKuan.orderName,t.form.faMoType="1",t.tableLoading=!0,this.postRequest("/fa/mo/add",t.form).then(function(a){t.tableLoading=!1,a&&200==a.status&&0==a.data.code?(e.$message.success("执行成功"),e.dialogFormVisible=!1,e.getCollectMouldList()):e.$message.error("执行失败")})},toShenHe:function(e){this.dialogFormVisible=!0,this.itemRuKu=e,this.form.kuFangRemark=""},toinfo:function(e){this.$router.push("/order/info/"+e)},toadd:function(){this.$router.push("/order/add")},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},getCollectMouldList:function(){var e=this;this.getRequest("/storage/put/listbypage?page="+this.currentPage+"&size="+this.pagesize+"&storageStatus=2").then(function(t){e.tableLoading=!1,t&&200==t.status&&0==t.data.code&&(e.tableData=t.data.data.putorderlist,e.totalnum=t.data.data.count)})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("发模管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("申请发模")])],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"产品名称",prop:"orderName"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.storageStatus+""=="2"?a("el-tag",{attrs:{type:"danger"}},[e._v("待发模")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"工艺类型",prop:"machiningType"}}),e._v(" "),a("el-table-column",{attrs:{label:"备忘"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasRemark+""=="true"?a("el-tag",[e._v("有")]):e._e(),e._v(" "),t.row.hasRemark+""=="false"?a("el-tag",{attrs:{type:"info"}},[e._v("无")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){e.toqianKuan(t.row)}}},[e._v("欠款发模")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){}}},[e._v("正常发模")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toOrderinfo(t.row)}}},[e._v("详情")])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{title:"欠款发模申请",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"欠款备注："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.faMoRemark,callback:function(t){e.$set(e.form,"faMoRemark",t)},expression:"form.faMoRemark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.qianKuan}},[e._v("提 交")]),e._v(" "),a("el-button",{on:{click:e.quxiao}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{title:"正常发模申请",visible:e.dialogFormVisible1,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form1,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"正常发模备注："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form1.faMoRemark,callback:function(t){e.$set(e.form1,"faMoRemark",t)},expression:"form1.faMoRemark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.zhengchang}},[e._v("提 交")]),e._v(" "),a("el-button",{on:{click:e.quxiao1}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var r=a("Z0/y")(n,l,!1,function(e){a("T0Wu")},"data-v-42609d87",null);t.default=r.exports}});
//# sourceMappingURL=3.c5ac741afca6f9b0e915.js.map