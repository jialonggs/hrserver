webpackJsonp([5],{Aw6W:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{select_engine:{},options:[],updateflag:!1,tableLoading2:!1,dialogFormVisible2:!1,kaiPiao:{projectId:"",projectName:""},orderList:[],itemProject:{yuBaoJia:{audit:""},businessBaoJia:{audit:""}},nowTab:1,username:"",name:"",uid:"",tableLoading:!1,addloading:!1,dialogFormVisible:!1,enginefrom:{name:"",remark:"",mainEngineId:"",addUserId:"",addUserName:""},currentPage:1,itemKaiPiao:{},totalnum:0,pagesize:10,select_word:"",tableData:[],businessBaoJiaInfo:{},yuBaoJiaInfo:{},rules:{name:[{required:!0,message:"请输入主机厂名称",trigger:"blur"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}]}}},methods:{toupdate:function(e){this.dialogFormVisible=!0,this.enginefrom=e,this.updateflag=!0},toadd:function(){this.dialogFormVisible=!0,this.addloading=!1},toQuxiao:function(){this.enginefrom={name:"",remark:"",addUserId:"",addUserName:""},this.updateflag=!1,this.dialogFormVisible=!1},toCheckEngineName:function(){var e=this,t=this.enginefrom.name;if("undefined"!=t&&0!=t.length){var a={carName:t};this.postRequest("/car/checkCarName",a).then(function(t){t&&200==t.status&&0==t.data.code?""===t.data.data?(e.addloading=!0,e.addEngine("enginefrom")):e.$message.error("车型名称已存在，无需重复添加"):e.$message.error("车型名称已存在，无需重复添加")})}else this.$message.error("请输入主机厂名称")},updateEngine:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.enginefrom.updateUserId=a.uid,a.enginefrom.updateUserName=a.name,t.postRequest("/car/update",a.enginefrom).then(function(e){t.dialogFormVisible=!1,e&&200==e.status&&0==e.data.code?(t.$message.success("修改成功"),t.getCollectMouldList()):t.$message.error("修改失败")})})},addEngine:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.enginefrom.addUserId=a.uid,a.enginefrom.addUserName=a.name,t.postRequest("/car/addCar",a.enginefrom).then(function(e){t.tableLoading=!0,e&&200==e.status&&0==e.data.code?(t.dialogFormVisible=!1,t.$message.success("添加成功"),t.getCollectMouldList()):t.$message.error("添加失败")})})},resetForm:function(e){this.$refs[e].resetFields()},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},getCollectMouldList:function(){var e=this;this.getRequest("/car/listbypage?page="+this.currentPage+"&size="+this.pagesize).then(function(t){e.tableLoading=!1,t&&200==t.status&&0==t.data.code&&(e.tableData=t.data.data.carlist,e.totalnum=t.data.data.count)})},getAllEngineList:function(){var e=this;this.getRequest("/engine/all").then(function(t){if(t&&200==t.status&&0==t.data.code){var a=t.data.data.allenginelist,i=[];if("undefined"!=a&&a.length>0){for(var s=0;s<a.length;s++){var n={label:"",value:""};n.label=a[s].name,n.value=a[s].id,i.push(n)}e.options=i}}})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList(),this.getAllEngineList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{data:function(){var e=this;return e.tableData.filter(function(t){if(t.name.indexOf(e.select_word)>-1||t.addUserName.indexOf(e.select_word)>-1)return t})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("车型管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("车型列表")])],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.toadd()}}},[e._v("添加车型")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"车型名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属主机厂"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.engine.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"addUserName",label:"添加人"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[a("i",{staticClass:"el-icon-time"}),e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toupdate(t.row)}}},[e._v("编辑")])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"车型信息","show-close":!1,visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"enginefrom",attrs:{model:e.enginefrom,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"车型名称:",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入车型名称"},model:{value:e.enginefrom.name,callback:function(t){e.$set(e.enginefrom,"name",t)},expression:"enginefrom.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择主机厂:",prop:"name"}},[[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.enginefrom.mainEngineId,callback:function(t){e.$set(e.enginefrom,"mainEngineId",t)},expression:"enginefrom.mainEngineId"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2),e._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.enginefrom.remark,callback:function(t){e.$set(e.enginefrom,"remark",t)},expression:"enginefrom.remark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[this.updateflag?e._e():a("el-button",{attrs:{type:"primary",disabled:this.addloading},on:{click:e.toCheckEngineName}},[e._v("确 定")]),e._v(" "),this.updateflag?a("el-button",{attrs:{type:"primary",disabled:this.addloading},on:{click:function(t){e.updateEngine("enginefrom")}}},[e._v("更 新")]):e._e(),e._v(" "),a("el-button",{on:{click:e.toQuxiao}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var n=a("Z0/y")(i,s,!1,function(e){a("wmE5")},"data-v-6e2772e0",null);t.default=n.exports},CrUE:function(e,t){},NCT7:function(e,t){},O6kv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{cars:[],allCars:[],select_engine:{},options:[],updateflag:!1,tableLoading2:!1,dialogFormVisible2:!1,kaiPiao:{projectId:"",projectName:""},orderList:[],itemProject:{yuBaoJia:{audit:""},businessBaoJia:{audit:""}},nowTab:1,username:"",name:"",uid:"",tableLoading:!1,addloading:!1,dialogFormVisible:!1,enginefrom:{clientCompanyName:"",contactPhone:"",contactPerson:"",remark:"",addUserId:"",addUserName:"",carIds:[]},currentPage:1,itemKaiPiao:{},totalnum:0,pagesize:10,select_word:"",tableData:[],businessBaoJiaInfo:{},yuBaoJiaInfo:{},rules:{clientCompanyName:[{required:!0,message:"请输入单位名称",trigger:"blur"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人",trigger:"blur"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}]}}},methods:{toupdate:function(e){if(this.dialogFormVisible=!0,this.enginefrom=e,this.updateflag=!0,e.cars.length>0)for(var t=0;t<e.cars.length;t++)this.cars.push(e.cars[t].id);this.updateEngine("enginefrom")},toadd:function(){this.dialogFormVisible=!0,this.addloading=!1},toQuxiao:function(){this.enginefrom={clientCompanyName:"",contactPhone:"",contactPerson:"",remark:"",addUserId:"",addUserName:"",carIds:[]},this.updateflag=!1,this.dialogFormVisible=!1},toCheckEngineName:function(){var e=this,t=this.enginefrom.name;if("undefined"!=t&&0!=t.length){var a={carName:t};this.postRequest("/car/checkCarName",a).then(function(t){t&&200==t.status&&0==t.data.code?""===t.data.data?(e.addloading=!0,e.addEngine("enginefrom")):e.$message.error("车型名称已存在，无需重复添加"):e.$message.error("车型名称已存在，无需重复添加")})}else this.$message.error("请输入主机厂名称")},updateEngine:function(e){var t=this,a=this;this.cars.length<=0?this.$message.error("请至少选择一个车型"):this.$refs[e].validate(function(e){if(!e)return!1;var i={id:a.enginefrom.id,clientCompanyName:a.enginefrom.clientCompanyName,contactPhone:a.enginefrom.contactPhone,contactPerson:a.enginefrom.contactPerson,remark:a.enginefrom.remark,carIds:t.cars};t.postRequest("/unit/update",i).then(function(e){t.dialogFormVisible=!1,e&&200==e.status&&0==e.data.code?(t.$message.success("修改成功"),t.getCollectMouldList()):t.$message.error("修改失败")})})},toAdd:function(e){var t=this,a=this;this.cars.length<=0?this.$message.error("请至少选择一个车型"):this.$refs[e].validate(function(e){if(!e)return!1;a.enginefrom.addUserId=a.uid,a.enginefrom.addUserName=a.name,a.enginefrom.carIds=t.cars,t.postRequest("/unit/add",a.enginefrom).then(function(e){if(e&&200==e.status&&0==e.data.code)t.dialogFormVisible=!1,t.$message.success("添加成功"),t.getCollectMouldList();else{console.log(e);var a=e.data.message;t.$message.error(a)}})})},resetForm:function(e){this.$refs[e].resetFields()},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},getCollectMouldList:function(){var e=this;this.getRequest("/unit/listbypage?page="+this.currentPage+"&size="+this.pagesize).then(function(t){e.tableLoading=!1,t&&200==t.status&&0==t.data.code&&(e.tableData=t.data.data.unitlist,e.totalnum=t.data.data.count)})},getAllEngineList:function(){var e=this;this.getRequest("/car/all").then(function(t){if(t&&200==t.status&&0==t.data.code){var a=t.data.data.allcarlist,i=[];if("undefined"!=a&&a.length>0){for(var s=0;s<a.length;s++){var n={label:"",value:""};n.label=a[s].name,n.value=a[s].id,i.push(n)}e.allCars=i}}})}},mounted:function(){this.$nextTick(function(){this.getCollectMouldList(),this.getAllEngineList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{data:function(){var e=this;return e.tableData.filter(function(t){if(t.clientCompanyName.indexOf(e.select_word)>-1||t.addUserName.indexOf(e.select_word)>-1)return t})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("单位管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("单位列表")])],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.toadd()}}},[e._v("添加单位")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:""}},[a("el-table-column",{attrs:{prop:"clientCompanyName",label:"单位名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"车型"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.cars,function(t){return a("el-tag",{key:t.id,staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"mini","disable-transitions":!1}},[e._v(e._s(t.name)+"\r\n                ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contactPerson",label:"联系人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addUserName",label:"添加人"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[a("i",{staticClass:"el-icon-time"}),e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toupdate(t.row)}}},[e._v("编辑")])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"车型信息","show-close":!1,visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"enginefrom",attrs:{model:e.enginefrom,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"选择车型:"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择车型"},model:{value:e.cars,callback:function(t){e.cars=t},expression:"cars"}},e._l(e.allCars,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"单位名称:",prop:"clientCompanyName"}},[a("el-input",{attrs:{placeholder:"请输入单位名称"},model:{value:e.enginefrom.clientCompanyName,callback:function(t){e.$set(e.enginefrom,"clientCompanyName",t)},expression:"enginefrom.clientCompanyName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人:",prop:"contactPerson"}},[a("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.enginefrom.contactPerson,callback:function(t){e.$set(e.enginefrom,"contactPerson",t)},expression:"enginefrom.contactPerson"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话:",prop:"contactPhone"}},[a("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.enginefrom.contactPhone,callback:function(t){e.$set(e.enginefrom,"contactPhone",t)},expression:"enginefrom.contactPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.enginefrom.remark,callback:function(t){e.$set(e.enginefrom,"remark",t)},expression:"enginefrom.remark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[this.updateflag?e._e():a("el-button",{attrs:{type:"primary",disabled:this.addloading},on:{click:function(t){e.toAdd("enginefrom")}}},[e._v("确 定")]),e._v(" "),this.updateflag?a("el-button",{attrs:{type:"primary",disabled:this.addloading},on:{click:function(t){e.updateEngine("enginefrom")}}},[e._v("更 新")]):e._e(),e._v(" "),a("el-button",{on:{click:e.toQuxiao}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var n=a("Z0/y")(i,s,!1,function(e){a("NCT7")},"data-v-bb1df65e",null);t.default=n.exports},"ds/T":function(e,t,a){var i={"./ProCarList.vue":"Aw6W","./ProEngineList.vue":"jyhV","./ProMaList.vue":"ykdn","./ProUnitList.vue":"O6kv"};function s(e){return a(n(e))}function n(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id="ds/T"},jsjn:function(e,t){},jyhV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{updateflag:!1,tableLoading2:!1,dialogFormVisible2:!1,kaiPiao:{projectId:"",projectName:""},orderList:[],itemProject:{yuBaoJia:{audit:""},businessBaoJia:{audit:""}},nowTab:1,username:"",name:"",uid:"",tableLoading:!1,addloading:!1,dialogFormVisible:!1,enginefrom:{name:"",remark:"",addUserId:"",addUserName:""},currentPage:1,itemKaiPiao:{},totalnum:0,pagesize:10,select_word:"",tableData:[],businessBaoJiaInfo:{},yuBaoJiaInfo:{},rules:{name:[{required:!0,message:"请输入主机厂名称",trigger:"blur"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}]}}},methods:{toupdate:function(e){this.dialogFormVisible=!0,this.enginefrom=e,this.updateflag=!0},toadd:function(){this.dialogFormVisible=!0,this.addloading=!1},toQuxiao:function(){this.enginefrom={name:"",remark:"",addUserId:"",addUserName:""},this.updateflag=!1,this.dialogFormVisible=!1},toCheckEngineName:function(){var e=this,t=this.enginefrom.name;if("undefined"!=t&&0!=t.length){var a={name:t};this.postRequest("/engine/checkEngineName",a).then(function(t){t&&200==t.status&&0==t.data.code?""===t.data.data.engine?(e.addloading=!0,e.updateflag?e.updateEngine("enginefrom"):e.addEngine("enginefrom")):e.$message.error("主机厂名称已存在，无需重复添加"):e.$message.error("主机厂名称已存在，无需重复添加")})}else this.$message.error("请输入主机厂名称")},updateEngine:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.enginefrom.updateUserId=a.uid,a.enginefrom.updateUserName=a.name,t.postRequest("/engine/updateEngine",a.enginefrom).then(function(e){t.dialogFormVisible=!1,e&&200==e.status&&0==e.data.code?(t.$message.success("修改成功"),t.getCollectMouldList()):t.$message.error("修改失败")})})},addEngine:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.enginefrom.addUserId=a.uid,a.enginefrom.addUserName=a.name,t.postRequest("/engine/addEngine",a.enginefrom).then(function(e){t.tableLoading=!0,e&&200==e.status&&0==e.data.code?(t.dialogFormVisible=!1,t.$message.success("添加成功"),t.getCollectMouldList()):t.$message.error("添加失败")})})},resetForm:function(e){this.$refs[e].resetFields()},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},getCollectMouldList:function(){var e=this;this.getRequest("/engine/listbypage?page="+this.currentPage+"&size="+this.pagesize).then(function(t){e.tableLoading=!1,t&&200==t.status&&0==t.data.code&&(e.tableData=t.data.data.enginelist,e.totalnum=t.data.data.count)})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{data:function(){var e=this;return e.tableData.filter(function(t){if(t.name.indexOf(e.select_word)>-1||t.addUserName.indexOf(e.select_word)>-1)return t})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("主机厂管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("主机厂列表")])],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.toadd()}}},[e._v("添加主机厂")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"主机厂名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addUserName",label:"添加人"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[a("i",{staticClass:"el-icon-time"}),e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toupdate(t.row)}}},[e._v("编辑")])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"主机厂信息",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"enginefrom",attrs:{model:e.enginefrom,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"主机厂名称:",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.enginefrom.name,callback:function(t){e.$set(e.enginefrom,"name",t)},expression:"enginefrom.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.enginefrom.remark,callback:function(t){e.$set(e.enginefrom,"remark",t)},expression:"enginefrom.remark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[this.updateflag?e._e():a("el-button",{attrs:{type:"primary",disabled:this.addloading},on:{click:e.toCheckEngineName}},[e._v("确 定")]),e._v(" "),this.updateflag?a("el-button",{attrs:{type:"primary",disabled:this.addloading},on:{click:e.toCheckEngineName}},[e._v("更 新")]):e._e(),e._v(" "),a("el-button",{on:{click:e.toQuxiao}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var n=a("Z0/y")(i,s,!1,function(e){a("CrUE")},"data-v-6e136b28",null);t.default=n.exports},wmE5:function(e,t){},ykdn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("+J3q"),s={components:{VueCoreImageUpload:a("OIbc").default},data:function(){return{wen_jian_url:"",upload:"",wenjianData:{userId:"",imgPakage:"yu_bao_jia"},selec_car:"",cars:[],units:[],tableLoading2:!1,dialogFormVisible2:!1,kaiPiao:{projectId:"",projectName:""},orderList:[],itemProject:{yuBaoJia:{audit:""},businessBaoJia:{audit:""},car:{name:""},processUnit:{cilentCompanyName:""}},imageData:{userId:"",imgPakage:"sfm_shou"},imageUrls:[],nowTab:1,username:"",name:"",uid:"",tableLoading:!1,addloading:!1,dialogFormVisible:!1,projectfrom:{projectName:"",cilentCompanyName:"",remark:"",unitId:"",addUserId:"",addUserName:""},currentPage:1,itemKaiPiao:{businessBaoJia:{}},totalnum:0,pagesize:10,select_word:"",tableData:[],businessBaoJiaInfo:{},yuBaoJiaInfo:{},rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}],unitId:[{required:!0,message:"请选择客户单位",trigger:"blur"}],cilentCompanyName:[{required:!0,message:"请输入客户单位",trigger:"blur"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}]}}},methods:{handleError:function(){this.$notify.error({title:"上传失败",message:"图片上传出现异常"})},delMouldImage:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.todelImage(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},todelImage:function(e){var t=this;"undefined"!=e&&""!=e.length?this.getRequest("/config/delfile/delImage?url="+e).then(function(a){if(a&&200==a.status&&0==a.data.code){t.$message.success("删除成功");for(var i=t.imageUrls,s=[],n=0;n<i.length;n++)e!=i[n]&&s.push(i[n]);t.imageUrls=s}else t.$message.error("删除照片失败")}):t.$message.error("删除图片不存在")},imageuploaded:function(e){if("undefined"!==e.url.length&&e.url.length>0){for(var t=e.url,a=this.imageUrls,i=0;i<t.length;i++)a.push(t[i]);this.imageUrls=a}},imageupwenjian:function(e){this.$message.success("上传成功");var t;"undefinded"!=(t=e.url)&&t.length>0&&(this.wen_jian_url=t[0])},toAddOrder:function(){this.$router.push("/order/add")},toAddYuBao:function(){this.$router.push("/offer/per/add")},toAddShangWu:function(){this.$router.push("/offer/bus/add")},getAllCarsList:function(){var e=this;this.getRequest("/car/all").then(function(t){if(t&&200==t.status&&0==t.data.code){var a=t.data.data.allcarlist,i=[];if("undefined"!=a&&a.length>0){for(var s=0;s<a.length;s++){var n={label:"",value:""};n.label=a[s].name,n.value=a[s].id,i.push(n)}e.cars=i}}})},quxiaoKai:function(){this.dialogFormVisible2=!1,this.kaiPiao={projectId:"",projectName:""}},toKaiPiao:function(e){this.dialogFormVisible2=!0,this.kaiPiao={projectId:"",projectName:"",addUserId:"",addUserName:"",wenJianUrl:""},this.wen_jian_url="",this.imageUrls=[],this.itemKaiPiao=e},addKaiPiao:function(){var e=this,t=this,a={};if(a=this.kaiPiao,this.kaiPiao.jinE>this.itemKaiPiao.needKaiPiao)this.$message.error("开票金额有误");else{for(var i="",s=0;s<t.imageUrls.length;s++)s==t.imageUrls.length-1?i+=t.imageUrls[s]:i=t.imageUrls[s]+"|"+i;a.xinXiUrl=i,a.projectId=t.itemKaiPiao.id,a.projectName=t.itemKaiPiao.projectName,a.addUserId=this.uid,a.addUserName=this.name,a.wenJianUrl=this.wen_jian_url,a.financeBiLi=t.itemKaiPiao.financeBiLi,a.financeJinE=t.itemKaiPiao.financeJinE,a.finalBaoJia=t.itemKaiPiao.businessBaoJia.finalBaoJia,a.needKaiPiao=t.itemKaiPiao.needKaiPiao,t.tableLoading2=!0,this.postRequest("/kai/piao/add",a).then(function(a){t.tableLoading2=!1,a&&200==a.status&&0==a.data.code?(e.$message.success("执行成功"),e.dialogFormVisible2=!1,e.getCollectMouldList()):e.$message.error("执行失败")})}},toInfo:function(e){this.$router.push("/plant/order/info/"+e)},goBack:function(){this.nowTab=1},xiangQing:function(e){this.nowTab=2,this.itemProject=e,this.orderList=e.orders,this.businessBaoJiaInfo=e.businessBaoJia,this.yuBaoJiaInfo=e.yuBaoJia},toadd:function(){this.dialogFormVisible=!0,this.addloading=!1},addProject:function(e){var t=this;this.addloading=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.projectfrom.addUserId=a.uid,a.projectfrom.addUserName=a.name,a.projectfrom.carId=a.selec_car,t.postRequest("/project/list/add/project",a.projectfrom).then(function(e){if(e&&200==e.status&&0==e.data.code){e.data.data.id;t.dialogFormVisible=!1,t.$message.success("添加成功"),t.tableLoading=!0,t.getCollectMouldList()}else t.$message.error("添加失败")})})},resetForm:function(e){this.$refs[e].resetFields()},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},getCollectMouldList:function(){var e=this;this.getRequest("/project/list/listbypage?page="+this.currentPage+"&size="+this.pagesize).then(function(t){e.tableLoading=!1,t&&200==t.status&&0==t.data.code&&(e.tableData=t.data.data.projectlist,e.totalnum=t.data.data.count)})},getAllUnitByCarList:function(e){var t=this;this.getRequest("/unit/list/bycarid?carId="+e).then(function(e){if(e&&200==e.status&&0==e.data.code){var a=e.data.data.unitlist,i=[];if("undefined"!=a&&a.length>0){for(var s=0;s<a.length;s++){var n={label:"",value:""};n.label=a[s].clientCompanyName,n.value=a[s].id,i.push(n)}t.units=i}}else t.$message.error("未找到该车型下的单位，请先进行添加")})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList(),this.getAllCarsList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name"),this.wenjianData.userId=this.uid=localStorage.getItem("cp_uid"),this.upload=i.a.upload},watch:{selec_car:function(e,t){""!==e&&"undefined"!==e&&this.getAllUnitByCarList(e)}},computed:{data:function(){var e=this;return e.tableData.filter(function(t){if(t.projectName.indexOf(e.select_word)>-1||t.cilentCompanyName.indexOf(e.select_word)>-1)return t})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("项目管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("我的项目")])],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.toadd()}}},[e._v("创建项目")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:""}},[a("el-table-column",{attrs:{prop:"projectName",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属车型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.car.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客户单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.processUnit.clientCompanyName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNums",label:"订单数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.orderNums+""=="undefined"||t.row.orderNums+""==""?a("el-tag",{attrs:{type:"info"}},[e._v("0")]):e._e(),e._v(" "),t.row.orderNums+""!=""?a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.orderNums))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"预报价状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.yuBaoJia.audit+""=="undefined"?a("el-tag",{attrs:{type:"info"}},[e._v("无")]):e._e(),e._v(" "),t.row.yuBaoJia.audit+""=="0"?a("el-tag",[e._v("审核中")]):e._e(),e._v(" "),t.row.yuBaoJia.audit+""=="2"?a("el-tag",{attrs:{type:"danger"}},[e._v("驳回")]):e._e(),e._v(" "),t.row.yuBaoJia.audit+""=="1"?a("el-tag",{attrs:{type:"success"}},[e._v("通过")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shangWuStatus",label:"商务报价状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.businessBaoJia.audit+""=="undefined"?a("el-tag",{attrs:{type:"info"}},[e._v("无")]):e._e(),e._v(" "),t.row.businessBaoJia.audit+""=="0"?a("el-tag",[e._v("审核中")]):e._e(),e._v(" "),t.row.businessBaoJia.audit+""=="2"?a("el-tag",{attrs:{type:"danger"}},[e._v("驳回")]):e._e(),e._v(" "),t.row.businessBaoJia.audit+""=="1"?a("el-tag",{attrs:{type:"success"}},[e._v("通过")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开票状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.kaiPiaoStatus+""=="0"&&t.row.businessBaoJia.audit+""!="1"?a("el-tag",{attrs:{type:"info"}},[e._v("不可开票")]):e._e(),e._v(" "),t.row.kaiPiaoStatus+""=="0"&&t.row.businessBaoJia.audit+""=="1"?a("el-tag",{attrs:{type:"success"}},[e._v("待开票")]):e._e(),e._v(" "),t.row.kaiPiaoStatus+""=="1"&&t.row.businessBaoJia.audit+""=="1"?a("el-tag",{attrs:{type:"success"}},[e._v("开票中")]):e._e(),e._v(" "),t.row.kaiPiaoStatus+""=="2"?a("el-tag",{attrs:{type:"warning"}},[e._v("开票完成")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[a("i",{staticClass:"el-icon-time"}),e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.xiangQing(t.row)}}},[e._v("详情")]),e._v(" "),t.row.kaiPiaoStatus+""!="2"&&t.row.businessBaoJia.audit+""=="1"?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toKaiPiao(t.row)}}},[e._v("开票")]):e._e()]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.nowTab,expression:"nowTab === 2"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("项目管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("我的项目")]),e._v(" "),a("el-breadcrumb-item",[e._v("项目详情")])],1)],1),e._v(" "),a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","margin-top":"20px"}}),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[e._v("基础信息")])],1)]),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("项目名称")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.itemProject.projectName))])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("客户单位")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.itemProject.processUnit.clientCompanyName)+" ")])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("所属车型")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.itemProject.car.name)+" ")])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("预报价状态")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[e.itemProject.yuBaoJia.audit+""=="undefined"?a("span",{attrs:{type:"info"}},[e._v("无")]):e._e(),e._v(" "),e.itemProject.yuBaoJia.audit+""=="0"?a("span",[e._v("审核中")]):e._e(),e._v(" "),e.itemProject.yuBaoJia.audit+""=="2"?a("span",{attrs:{type:"danger"}},[e._v("驳回")]):e._e(),e._v(" "),e.itemProject.yuBaoJia.audit+""=="1"?a("span",{attrs:{type:"success"}},[e._v("通过")]):e._e()])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("商务报价状态")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[e.itemProject.businessBaoJia.audit+""=="undefined"?a("span",{attrs:{type:"info"}},[e._v("无")]):e._e(),e._v(" "),e.itemProject.businessBaoJia.audit+""=="0"?a("span",[e._v("审核中")]):e._e(),e._v(" "),e.itemProject.businessBaoJia.audit+""=="2"?a("span",{attrs:{type:"danger"}},[e._v("驳回")]):e._e(),e._v(" "),e.itemProject.businessBaoJia.audit+""=="1"?a("span",{attrs:{type:"success"}},[e._v("通过")]):e._e()])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("订单数量")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.itemProject.orderNums))])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("项目状态")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v("进行中")])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("创建时间")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.itemProject.createTime))])])])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"3"===e.itemProject.status,expression:"itemProject.status === '3'"}],staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("完结时间")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.itemProject.endtime))])])])],1)],1)]),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[e._v("订单列表")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.toAddOrder}},[e._v("添加订单")])],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderList}},[a("el-table-column",{attrs:{prop:"orderName",label:"产品名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户单位",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e.itemProject.processUnit.clientCompanyName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"进度",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v("药检")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status+""==""?a("el-tag",{attrs:{type:"info"}},[e._v("加工中")]):e._e(),e._v(" "),t.row.status+""=="1"?a("el-tag",{attrs:{type:"danger"}},[e._v("完成")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.addUserId==""+e.uid||e.uid+""=="3"?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toInfo(t.row.id)}}},[e._v("查看详情")]):e._e()]}}])})],1)],1)])],1),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[e._v("商务报价")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.toAddShangWu}},[e._v("添加商务报价")])],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("客户单位")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.businessBaoJiaInfo.clientCompanyName))])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("联系人")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.businessBaoJiaInfo.contactPerson)+" ")])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("联系电话")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.businessBaoJiaInfo.contactPhone)+" ")])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("车型")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.businessBaoJiaInfo.carType)+" ")])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("税率")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.businessBaoJiaInfo.tax))])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("含税总价")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.businessBaoJiaInfo.total))])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("不含税总价")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.businessBaoJiaInfo.noTaxTotal))])])])],1)],1),e._v(" "),e.businessBaoJiaInfo.submitType+""=="1"?a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("上传文件")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("a",{staticStyle:{color:"blue"},attrs:{href:e.businessBaoJiaInfo.fuJianUrl,download:"w3logo"}},[e._v("下载原文件")])])])],1)],1):e._e(),e._v(" "),e.businessBaoJiaInfo.submitType+""=="0"?a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"25px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("产品列表")])]),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.businessBaoJiaInfo.businessProductList,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"productName",label:"产品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wenlidaima",label:"纹理代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productNum",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"含税"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"单价"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"面积"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"不含税价格"}})],1)],1)]):e._e()],1),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[e._v("预报价")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.toAddYuBao}},[e._v("添加预报价")])],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("客户单位")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.yuBaoJiaInfo.clientCompanyName))])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("联系人")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.yuBaoJiaInfo.contactPerson)+" ")])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("联系电话")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.yuBaoJiaInfo.contactPhone)+" ")])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("车型")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.yuBaoJiaInfo.carType)+" ")])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("税率")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.yuBaoJiaInfo.tax))])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("含税总价")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.yuBaoJiaInfo.total))])])])],1)],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("不含税总价")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[e._v(e._s(e.yuBaoJiaInfo.noTaxTotal))])])])],1)],1),e._v(" "),e.yuBaoJiaInfo.submitType+""=="1"?a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[e._v("上传文件")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("a",{staticStyle:{color:"blue"},attrs:{href:e.yuBaoJiaInfo.fuJianUrl,download:"w3logo"}},[e._v("下载原文件")])])])],1)],1):e._e(),e._v(" "),e.yuBaoJiaInfo.submitType+""=="0"?a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"25px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("产品列表")])]),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.yuBaoJiaInfo.businessProductList,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"productName",label:"产品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wenlidaima",label:"纹理代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productNum",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"含税"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"单价"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"面积"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"不含税价格"}})],1)],1)]):e._e()],1),e._v(" "),a("div",{staticClass:"handle-box",staticStyle:{float:"right","margin-top":"25px"}},[a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.goBack()}}},[e._v("返回列表")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"项目信息",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"projectfrom",attrs:{model:e.projectfrom,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"选择车型:",prop:"carId"}},[[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.selec_car,callback:function(t){e.selec_car=t},expression:"selec_car"}},e._l(e.cars,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2),e._v(" "),a("el-form-item",{attrs:{label:"选择客户单位:",prop:"unitId"}},[[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.projectfrom.unitId,callback:function(t){e.$set(e.projectfrom,"unitId",t)},expression:"projectfrom.unitId"}},e._l(e.units,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2),e._v(" "),a("el-form-item",{attrs:{label:"项目名称：",prop:"projectName"}},[a("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.projectfrom.projectName,callback:function(t){e.$set(e.projectfrom,"projectName",t)},expression:"projectfrom.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.projectfrom.remark,callback:function(t){e.$set(e.projectfrom,"remark",t)},expression:"projectfrom.remark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:this.addloading},on:{click:function(t){e.addProject("projectfrom")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading2,expression:"tableLoading2"}],attrs:{title:"开票申请",visible:e.dialogFormVisible2,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("div",{staticClass:"form-box"},[a("div",[e._v("\r\n        开票类型 :"),e.itemKaiPiao.financeBiLi+""!="100"?a("el-tag",{attrs:{type:"warning"}},[e._v("欠款开票")]):e._e(),e._v(" "),e.itemKaiPiao.financeBiLi+""=="100"?a("el-tag",{attrs:{type:"success"}},[e._v("到款开票")]):e._e()],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[e._v("\r\n        到款比例 :"),a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.itemKaiPiao.financeBiLi))])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[e._v("\r\n        到款金额 :"),a("el-tag",{attrs:{type:"default"}},[e._v(e._s(e.itemKaiPiao.financeJinE))])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[e._v("\r\n        最终优惠价:"),a("el-tag",{attrs:{type:"default"}},[e._v(e._s(e.itemKaiPiao.businessBaoJia.finalBaoJia))])],1),e._v(" "),a("div",[a("p",[e._v("剩余开票金额: "),a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.itemKaiPiao.needKaiPiao))])],1)]),e._v(" "),a("div",{staticStyle:{width:"100%",height:"1px","border-top":"1px solid","margin-bottom":"15px"}}),e._v(" "),a("el-form",{ref:"kaiPiao",attrs:{model:this.kaiPiao,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"开票单位名称：",prop:"unitName"}},[a("el-input",{model:{value:e.kaiPiao.unitName,callback:function(t){e.$set(e.kaiPiao,"unitName",t)},expression:"kaiPiao.unitName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开票信息资料："}},[a("div",[a("vue-core-image-upload",{class:["el-button","el-button--primary"],attrs:{crop:!1,inputOfFile:"imageFile",url:e.upload,extensions:"png,gif,jpeg,jpg","max-file-size":5242880,data:e.imageData,text:"上传图片",multiple:!0,"multiple-size":30,credentials:"true"},on:{imageuploaded:e.imageuploaded,errorhandle:e.handleError}})],1)])],1),e._v(" "),e.imageUrls.length>0?a("div",{staticStyle:{border:"1px dashed #d9d9d9","max-height":"358px","margin-bottom":"5px"}},[a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},e._l(e.imageUrls,function(t){return a("el-col",{attrs:{span:6}},[a("el-card",{staticClass:"mould-card",attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",staticStyle:{"max-height":"358px"},attrs:{src:t}}),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.delMouldImage(t)}}},[a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})])],1)])],1)}))],1):e._e()]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"类型：",prop:"ziLiaoType"}},[a("el-radio-group",{model:{value:e.kaiPiao.ziLiaoType,callback:function(t){e.$set(e.kaiPiao,"ziLiaoType",t)},expression:"kaiPiao.ziLiaoType"}},[a("el-radio",{attrs:{label:"沿用老资料",value:"0"}}),e._v(" "),a("el-radio",{attrs:{label:"新开票信息",value:"1"}})],1)],1)],1)])],1),e._v(" "),a("div",{staticStyle:{width:"100%",height:"1px","border-top":"1px solid","margin-bottom":"15px"}}),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"货物或应税劳务名称：",prop:"laoWuMingCheng","label-width":"160px"}},[a("el-input",{model:{value:e.kaiPiao.laoWuMingCheng,callback:function(t){e.$set(e.kaiPiao,"laoWuMingCheng",t)},expression:"kaiPiao.laoWuMingCheng"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格型号：",prop:"guiGeXingHao"}},[a("el-input",{model:{value:e.kaiPiao.guiGeXingHao,callback:function(t){e.$set(e.kaiPiao,"guiGeXingHao",t)},expression:"kaiPiao.guiGeXingHao"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单 位：",prop:"danWei"}},[a("el-input",{model:{value:e.kaiPiao.danWei,callback:function(t){e.$set(e.kaiPiao,"danWei",t)},expression:"kaiPiao.danWei"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"数 量：",prop:"shuLiang"}},[a("el-input",{model:{value:e.kaiPiao.shuLiang,callback:function(t){e.$set(e.kaiPiao,"shuLiang",t)},expression:"kaiPiao.shuLiang"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"含税金额：",prop:"jinE"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.kaiPiao.jinE,callback:function(t){e.$set(e.kaiPiao,"jinE",t)},expression:"kaiPiao.jinE"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传文件："}},[a("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.wen_jian_url,expression:"wen_jian_url !== ''"}]},[a("p",{staticStyle:{color:"blue"}},[e._v("上传成功")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:""===e.wen_jian_url,expression:"wen_jian_url === ''"}]},[a("vue-core-image-upload",{class:["el-button","el-button--primary"],attrs:{crop:!1,inputOfFile:"imageFile",url:e.upload,extensions:"png,ppt,docx,txt,jpg,xlsx,pdf","max-file-size":5242880,data:e.wenjianData,text:"上传文件",multiple:!0,"multiple-size":30,credentials:"true"},on:{imageuploaded:e.imageupwenjian,errorhandle:e.handleError}})],1)])],1)])],1),e._v(" "),a("div",{staticStyle:{width:"100%",height:"1px","border-top":"1px solid","margin-bottom":"15px"}}),e._v(" "),a("el-row",{attrs:{gutter:20}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addKaiPiao}},[e._v("提 交")]),e._v(" "),a("el-button",{on:{click:e.quxiaoKai}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var l=a("Z0/y")(s,n,!1,function(e){a("jsjn")},"data-v-18d42601",null);t.default=l.exports}});
//# sourceMappingURL=5.085a95c6720b63c097f8.js.map