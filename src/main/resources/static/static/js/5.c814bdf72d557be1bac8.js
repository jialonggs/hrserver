webpackJsonp([5],{Ciec:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Z0/y")(null,null,!1,null,null,null);t.default=l.exports},F6Rv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("P6Ff"),i={data:function(){return{tableLoading:!1,changeDisable:!0,currentPage:1,totalnum:0,pagesize:10,select_word:"",tableData:[],username:"",uid:"",batch:"",upadteDisabled:!1,tiem_disablse:!1,part_disable:!1,chomgzi_dis:!1,update_disablse:!1,base_disablse:!1,doc_collect_id:"",dialogFormVisible:!1,itemForm:{},ruleForm:{createTime:"",addUserName:"",addUserId:"",woodenCaseNum:"0",palletNum:"0",diaoHuanNum:"0",clientCompanyName:"",freightType:"",carNum:"",jianBao:!1,driverPhone:""},rules:{clientCompanyName:[{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"}],freightType:[{required:!0,message:"请至少选择一种运输方式",trigger:"blur"}],carNum:[{min:8,max:24,message:"长度在 8 到 24 个字符",trigger:"blur"}],driverPhone:[{min:11,max:11,message:"请检查手机号码格式",trigger:"blur"}],remark:[{min:0,max:255,message:"长度在 0 到 255 个字符",trigger:"blur"}]}}},methods:{goBack:function(){this.changeDisable=!this.changeDisable},toAddMouldRecord:function(){this.changeDisable=!this.changeDisable,this.tiem_disablse=!1,this.ruleForm={},this.batch=""},chaKan:function(e){var t=this;t.changeDisable=!t.changeDisable;var a=e.id;this.getRequest("/shou/mo/get/byid?id="+a).then(function(e){if(e&&200==e.status){t.$message.success("获取成功"),console.log(e.data.shouMo);var a=e.data.shouMo,i=l.a.formatTime(a.createTime),r=l.a.formatTime(a.updateTime);a.createTime=i,a.updateTime=r,t.tiem_disablse=!0,t.update_disablse=!0,t.ruleForm=a,t.batch=a.batch}else t.$message.error("获取失败")})},updateCollectionInfo:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;console.log(a.ruleForm),a.ruleForm.mouldInfos=[],"undefined"!=a.ruleForm.id&&a.ruleForm.id+""!=""?t.putRequest("/shou/mo/update/baseinfo",a.ruleForm).then(function(e){e&&200==e.status?(a.$message.success("修改成功"),a.update_disablse=!1):a.$message.error("修改失败")}):a.$message.error("修改失败")})},resetForm:function(e){this.$refs[e].resetFields()},submitForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.ruleForm.addUserId=t.uid,a.ruleForm.addUserName=t.name,a.ruleForm.batch=t.batch,t.postRequest("/shou/mo/add/baseinfo",a.ruleForm).then(function(e){if(e&&200==e.status){var l=e.data.id;-1==l?_this.$message.error("此员工信息已被绑定请，检查"):(a.doc_collect_id=l,a.toAddMouldRecord(),t.tableLoading=!0,a.getCollectMouldList(),a.$message.success("添加成功"))}})})},toChange:function(){this.toInitBatch()},toInitBatch:function(){var e=this,t=e.ruleForm.createTime;""!=t&&"undefined"!=t?this.getRequest("/shou/mo/max/batch?dateTime="+t).then(function(t){if(t&&200==t.status){var a=t.data.maxBatch+1;e.$nextTick(function(){this.batch="第"+a+"批次"})}else e.ruleForm.batch=""}):e.$message.error("请先设置收模时间")},toChangeDisable:function(){"undefined"!=this.doc_collect_id&&""!=this.doc_collect_id?(this.dialogFormVisible=!this.dialogFormVisible,this.resetForm("form")):this.$message.error("请先添加基础信息")},toUpdate:function(){this.update_disablse=!0},handleChange:function(e){},handleSizeChange:function(e){this.pagesize=e,this.getCollectMouldList()},handleCurrentChange:function(e){this.currentPage=e,this.getCollectMouldList()},handleClick:function(e){var t="/mould/collectinfo/"+e.pkGuid;this.$router.push(t)},getCollectMouldList:function(){var e=this,t=this;this.getRequest("/shou/mo/listbypage?page="+this.currentPage+"&size="+this.pagesize).then(function(a){e.tableLoading=!1,a&&200==a.status&&(t.tableData=a.data.shoumolist,t.totalnum=a.data.count)})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{data:function(){var e=this;return e.tableData.filter(function(t){if(t.clientCompanyName.indexOf(e.select_word)>-1||t.addUserName.indexOf(e.select_word)>-1)return t})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.changeDisable,expression:"changeDisable"}]},[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"plus"},on:{click:e.toAddMouldRecord}},[e._v("增添收模记录")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.data,stripe:""}},[a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"batch",align:"center",label:"批次"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clientCompanyName",align:"center",label:"客户单位"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"模具总数"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.mouldInfos+""!="null"&&t.row.mouldInfos+""!="undefined"?[e._v(e._s(t.row.mouldInfos.length))]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"addUserName",align:"center",label:"添加人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.chaKan(t.row)}}},[e._v("查看详情")])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,80,100],"page-size":e.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.changeDisable,expression:"!changeDisable"}],staticStyle:{width:"100%",float:"right","margin-top":"30px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("收模基础信息")])]),e._v(" "),a("div",[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"批次：",prop:"batch"}},[a("el-input",{staticStyle:{width:"28%"},attrs:{placeholder:"设置时间后会自动判断批次",disabled:!0},model:{value:e.batch,callback:function(t){e.batch=t},expression:"batch"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收模时间：",prop:"createTime",required:""}},[a("el-date-picker",{staticStyle:{width:"28%"},attrs:{disabled:e.tiem_disablse,format:"yyyy 年 MM 月 dd 日 HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},on:{change:e.toChange},model:{value:e.ruleForm.createTime,callback:function(t){e.$set(e.ruleForm,"createTime",t)},expression:"ruleForm.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户单位：",prop:"clientCompanyName"}},[a("el-input",{staticStyle:{width:"28%"},attrs:{placeholder:"请输入客户单位名称",disabled:e.base_disablse},model:{value:e.ruleForm.clientCompanyName,callback:function(t){e.$set(e.ruleForm,"clientCompanyName",t)},expression:"ruleForm.clientCompanyName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运输方式：",prop:"freightType"}},[a("el-radio-group",{attrs:{disabled:e.base_disablse},model:{value:e.ruleForm.freightType,callback:function(t){e.$set(e.ruleForm,"freightType",t)},expression:"ruleForm.freightType"}},[a("el-radio",{attrs:{label:"快递"}}),e._v(" "),a("el-radio",{attrs:{label:"货运"}}),e._v(" "),a("el-radio",{attrs:{label:"专车"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"车牌号：",prop:"carNum"}},[a("el-input",{staticStyle:{width:"28%"},attrs:{placeholder:"请输入车牌号",disabled:e.base_disablse},model:{value:e.ruleForm.carNum,callback:function(t){e.$set(e.ruleForm,"carNum",t)},expression:"ruleForm.carNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"驾驶员手机号：",prop:"driverPhone"}},[a("el-input",{staticStyle:{width:"28%"},attrs:{placeholder:"请输入手机号",disabled:e.base_disablse},model:{value:e.ruleForm.driverPhone,callback:function(t){e.$set(e.ruleForm,"driverPhone",t)},expression:"ruleForm.driverPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包装方式："}},[a("div",{staticStyle:{border:"1px dashed #d9d9d9",width:"40%","min-height":"128px"}},[a("el-form-item",{attrs:{label:"简包：",prop:"jianBao"}},[a("el-switch",{attrs:{disabled:e.base_disablse,"active-text":"是","inactive-text":"否"},model:{value:e.ruleForm.jianBao,callback:function(t){e.$set(e.ruleForm,"jianBao",t)},expression:"ruleForm.jianBao"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"木箱：",prop:"woodenCaseNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,disabled:e.base_disablse},on:{change:e.handleChange},model:{value:e.ruleForm.woodenCaseNum,callback:function(t){e.$set(e.ruleForm,"woodenCaseNum",t)},expression:"ruleForm.woodenCaseNum"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"托盘：",prop:"palletNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,disabled:e.base_disablse},on:{change:e.handleChange},model:{value:e.ruleForm.palletNum,callback:function(t){e.$set(e.ruleForm,"palletNum",t)},expression:"ruleForm.palletNum"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"吊环：",prop:"diaoHuanNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,disabled:e.base_disablse},on:{change:e.handleChange},model:{value:e.ruleForm.diaoHuanNum,callback:function(t){e.$set(e.ruleForm,"diaoHuanNum",t)},expression:"ruleForm.diaoHuanNum"}})],1)],1)])],1)],1),e._v(" "),a("div",[a("div",{staticClass:"card-bottom"},[a("el-button",{attrs:{type:"primary"},on:{click:e.goBack}},[e._v("返 回 ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!0!==e.update_disablse,expression:"update_disablse !== true"}],staticStyle:{float:"right"},on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重 置")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!1===e.update_disablse,expression:"update_disablse === false"}],staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保 存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!0===e.update_disablse,expression:"update_disablse === true "}],staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.updateCollectionInfo("ruleForm")}}},[e._v("提 交")])],1)])])],1)])},staticRenderFns:[]};var s=a("Z0/y")(i,r,!1,function(e){a("LHFy")},"data-v-1b01c09a",null);t.default=s.exports},LHFy:function(e,t){},pGro:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Z0/y")(null,null,!1,null,null,null);t.default=l.exports},qa5Q:function(e,t,a){var l={"./AddShou.vue":"pGro","./ChaiMoList.vue":"Ciec","./ShouList.vue":"F6Rv"};function i(e){return a(r(e))}function r(e){var t=l[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(l)},i.resolve=r,e.exports=i,i.id="qa5Q"}});
//# sourceMappingURL=5.c814bdf72d557be1bac8.js.map