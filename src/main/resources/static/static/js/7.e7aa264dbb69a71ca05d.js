webpackJsonp([7],{"5hjX":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{dialogFormVisible12:!1,techCard:{piWenDaiMa:"待添加",nanDuXiShu:"待添加",tieHuaBuShu:"待添加",gongYiCanShu:"待添加",guangZhe:"待添加",chaiLiao:"待添加",tiaoZheng:"待添加",remark:"待添加"},itemOrder:{},itemYga:{},Ygas:[],outerVisible:!1,form:{},techId:!1,liuCheng:[],userLogo:"",udapteBoolean:!1,elform:{},zhiliang:[],selRoles:[],allRoles:[],selRolesBak:[],innerVisible:!1,urlId:"",qrCode:"",imageUrl:"",contr_loading:!1,base_loading:!1,exform:{addUserId:"",addUserName:"",orderId:"",qiKong:"无",queKou:"无",lieFeng:"无",hanBa:"无",dianHuoHua:"无",youShiSi:"无",heMoBian:"0",fenXingBian:"0",tongGZ:!1,zuiHouShiMoJian:"0",ckd:"0",guangJian:"0"},orderFlow:{},flowData:[],filterText:"",tree_loading:!1,item_order_id:"2",defaultProps:{children:"children",label:"label"},select_part:[],data3:[],nowTab:1,username:"",name:"",uid:"",form1:{},tableLoading:!1,selectFlow:{},imageUrls:[],restaurants1:[],restaurants2:[],restaurants3:[],restaurants4:[],restaurants5:[],restaurants6:[],nanDuDengJi:"",imageData:{userId:"",imgPakage:"order_pm"},ruleForm:{orderName:"",addUserId:"",addUserName:"",projectId:"",hasRemark:!1,picUrls:"",urgency:"0",remark:"",realityArea:"0",machiningType:""},restaurants:[],rules:{orderName:[{required:!0,message:"请输入订单名称",trigger:"blur"},{min:1,max:255,message:"长度在 0 到 255 个字符",trigger:"blur"}],machiningType:[{required:!0,message:"请选择工艺类型",trigger:"blur"}],managerId:[{required:!0,message:"请选择车间负责人",trigger:"blur"}],realityArea:[{required:!0,message:"请输入加工面积",trigger:"blur"}],projectId:[{required:!0,message:"请选择所属项目",trigger:"blur"}],urgency:[{required:!0,message:"请选择订单紧急成度",trigger:"blur"}]}}},components:{VueCoreImageUpload:a("OIbc").default},watch:{filterText:function(t){this.$refs.tree2.filter(t)}},methods:{toNanDu:function(){this.dialogFormVisible12=!0,this.form1={}},nanDu:function(){var t=this,e={nanDuDengJi:this.form1.nanDuDengJi,orderId:this.urlId};this.tableLoading=!0,this.postRequest("/plant/nan/du",e).then(function(e){t.tableLoading=!1,e&&200==e.status&&0==e.data.code?(t.$message.success("设置成功"),t.form1.nanDuDengJi="",t.nanDuDengJi=t.form1.nanDuDengJi,t.dialogFormVisible12=!1):t.$message.error("设置失败")})},deleteRow:function(t,e){e.splice(t,1)},selectYga:function(){var t=this.itemYga,e=this.Ygas,a=this.selectFlow.tieHuaNum,s=this.itemOrder.workArea,r=this.form.biLi,l={userId:"",userName:"",biLi:"",allTieHuaArea:"",oneceTieHuaArea:"",jingFengArea:"",orderNeedArea:""};if(e.length>0){for(var i=0;i<e.length;i++)if(e[i].userId===t.value)return void this.$message.error("该员工已添加");l.userId=t.value,l.userName=t.label,l.biLi=r,l.allTieHuaArea=.9*s*r/100,l.oneceTieHuaArea=l.allTieHuaArea/a,l.jingFengArea=.1*s*r/100,l.orderNeedArea=s,this.Ygas.push(l)}else l.userId=t.value,l.userName=t.label,l.biLi=r,l.allTieHuaArea=.9*s*r/100,l.oneceTieHuaArea=l.allTieHuaArea/a,l.jingFengArea=.1*s*r/100,l.orderNeedArea=s,this.Ygas.push(l);this.$message.success("添加成功"),this.itemYga={},this.form={},this.outerVisible=!1},test:function(t){for(var e=0;e<this.flowData.length;e++)t===this.flowData[e].id&&(this.selectFlow=this.flowData[e])},toQuXiao:function(){this.innerVisible=!1,this.resetForm("elform")},fenPei:function(){this.selectFlow={},this.elform={},this.selRoles=[],this.zhiliang=[],this.innerVisible=!0},toFenPei:function(){var t=this,e=this;if(0!=this.Ygas.length){var a=[];if(0!=this.zhiliang.length){for(var s=0;s<this.zhiliang.length;s++){var r={id:this.zhiliang[s].value,name:this.zhiliang[s].label};a.push(r)}var l=this.Ygas;if(l.length<=0)e.$message.info("请完成面积分配");else{for(var i=0,n=0;n<l.length;n++)i+=parseInt(l[n].biLi);if(i+""=="100"){var o={orderId:this.urlId,orderName:this.itemOrder.orderName,addUserId:this.uid,addUserName:this.name,ygas:this.Ygas,qualityUsers:a,flow:this.selectFlow};this.jsonPostRequest("/plant/fen/pei",o).then(function(a){a&&200==a.status&&0==a.data.code?(e.$message.success("分配任务成功"),t.$router.push("/plant/new/order")):e.$message.error("分配任务失败")})}else e.$message.error("分配总比例不等于100%")}}else e.$message.info("至少选择一位质量总监")}else e.$message.error("至少选择一位工艺师")},resetForm:function(t){this.$refs[t].resetFields()},handleSelect:function(t){},loadAllliucheng:function(){var t=this;this.getRequest("/work/flow/list/steps").then(function(e){if(e&&200==e.status&&0==e.data.code){var a=[],s=e.data.data.flowlist;if(t.flowData=s,"undefined"!=s&&s.length>0){for(var r=0;r<s.length;r++){var l={label:"",value:""};l.label=s[r].flowName,l.value=s[r].id,a.push(l)}t.restaurants3=a}}else console.log("获取列表数据失败")})},loadAllYuanGongA:function(){var t=this;this.getRequest("/config/mangers?role=ROLE_yga").then(function(e){if(e&&200==e.status&&0==e.data.code){var a=[],s=e.data.data;if("undefined"!=s&&s.length>0){for(var r=0;r<s.length;r++){var l={label:"",value:""};l.label=s[r].name,l.value=s[r].id,a.push(l)}t.restaurants4=a}}else console.log("获取列表数据失败")})},loadAllZhiliang:function(){var t=this;this.getRequest("/config/mangers?role=ROLE_zhiliang").then(function(e){if(e&&200==e.status&&0==e.data.code){var a=[],s=e.data.data;if("undefined"!=s&&s.length>0){for(var r=0;r<s.length;r++){var l={label:"",value:""};l.label=s[r].name,l.value=s[r].id,a.push(l)}t.restaurants5=a}}else console.log("获取列表数据失败")})},splitUrl:function(t){var e=t.picUrls,a=[];return"undefined"!=e&&""!=e&&(a=e.split("|")),a},getOrderInfo:function(t){var e=this;this.getRequest("/config/info?orderId="+t).then(function(t){if(t&&200==t.status&&0==t.data.code){console.log(t);var a=t.data.data.orderinfo.orderFlow;""!=a&&"undefined"!==a&&(e.orderFlow=JSON.parse(a.flowJson)),e.nanDuDengJi=t.data.data.orderinfo.nanDuDengJi,e.itemOrder=t.data.data.orderinfo,e.ruleForm=t.data.data.orderinfo,e.techId=t.data.data.orderinfo.techId;var s=t.data.data.orderinfo.techCard;""!==s&&(e.techCard=s),e.qrCode=t.data.data.orderinfo.qrCode,e.exform=t.data.data.orderinfo.controlOrderFrom;var r=t.data.data.orderinfo.mouldInfoList;if(r.length>0)for(var l=0;l<r.length;l++){var i={collectPartinfoEntity:{}};i.collectPartinfoEntity=r[l],e.addSelected(i)}""!==t.data.data.orderinfo.picUrls&&(e.imageUrls=e.splitUrl(t.data.data.orderinfo))}else console.log("获取订单详情失败")})},addSelected:function(t){var e=this.select_part;if(0===e.length)t.collectPartinfoEntity.picurl instanceof Array?e.push(t):(t.collectPartinfoEntity.picurl=this.splitUrl(t.collectPartinfoEntity),e.push(t));else{for(var a=!0,s=0;s<e.length;s++)if(e[s].collectPartinfoEntity.id===t.collectPartinfoEntity.id){a=!1;break}a&&(t.collectPartinfoEntity.picurl instanceof Array?e.push(t):(t.collectPartinfoEntity.picurl=this.splitUrl(t.collectPartinfoEntity),e.push(t)))}}},mounted:function(){this.$nextTick(function(){}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name"),this.loadAllliucheng(),this.loadAllYuanGongA(),this.loadAllZhiliang()},created:function(){this.urlId=this.$route.params.id,this.getOrderInfo(this.urlId)}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),t._v("订单管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("创建订单")])],1)],1),t._v(" "),a("el-container",[a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"20px"}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.techId&&t.ruleForm.plantStatus+""!="1",expression:"techId && ruleForm.plantStatus+''!=='1' "}],attrs:{type:"primary"},on:{click:t.fenPei}},[t._v("分配工作")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.techId,expression:"!techId"}]},[t._v("等待工艺卡提交....")])],1),t._v(" "),a("div",[this.nanDuDengJi+""=="待设定"?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:t.toNanDu}},[t._v("设置难度")]):t._e()],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[t._v("加工步骤")])],1)]),t._v(" "),a("div",[""===this.orderFlow?a("span",[t._v("待分配")]):t._e(),t._v(" "),""!==this.orderFlow?a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[a("span",[t._v(t._s(this.orderFlow.flowName))]),t._v(" "),a("el-steps",{attrs:{"align-center":""}},t._l(this.orderFlow.stepslist,function(t){return a("el-step",{attrs:{title:t.stepName,description:t.remark}})}))],1):t._e()],1)])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[t._v("基本信息")])],1)]),t._v(" "),a("div",[a("el-row",{attrs:{gutter:30}},[a("el-col",{staticStyle:{"border-right":"1px dashed rgb(217, 217, 217)"},attrs:{span:8}},[a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("所属项目")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(this.itemOrder.project.projectName))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("客户单位")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(this.itemOrder.project.processUnit.clientCompanyName))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("经办人")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(this.itemOrder.project.addUserName))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("创建时间")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(this.itemOrder.project.createTime))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("预计完工时间")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(this.itemOrder.expectedTime))])])])],1)],1),t._v(" "),a("el-col",{staticStyle:{"border-right":"1px dashed rgb(217, 217, 217)"},attrs:{span:8}},[a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("加工工艺师")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[this.itemOrder.orderUsers.length+""=="0"?a("el-tag",{attrs:{type:"warning"}},[t._v("待分配")]):t._e(),t._v(" "),t._l(this.itemOrder.orderUsers,function(e){return a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.userName))])})],2)])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("质量总监")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[this.itemOrder.qualityOrderUsers.length+""=="0"?a("el-tag",{attrs:{type:"warning"}},[t._v("待分配")]):t._e(),t._v(" "),t._l(this.itemOrder.qualityOrderUsers,function(e){return a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.userName))])})],2)])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("车间主管")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(this.itemOrder.managerName))])])])],1)],1),t._v(" "),a("el-col",{attrs:{span:8}})],1)],1)])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.base_loading,expression:"base_loading"}],staticStyle:{"margin-top":"10px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[t._v("订单基础信息")])],1)]),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("订单名称")])],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.ruleForm.orderName))])])])],1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("加工类型")])],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.ruleForm.machiningType))])])])],1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("紧急程度")])],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[this.itemOrder.urgency+""=="0"?a("el-tag",{attrs:{type:"primary"}},[t._v("不急")]):t._e(),t._v(" "),this.itemOrder.urgency+""=="1"?a("el-tag",{attrs:{type:"danger"}},[t._v("正常")]):t._e(),t._v(" "),this.itemOrder.urgency+""=="2"?a("el-tag",{attrs:{type:"primary"}},[t._v("急C")]):t._e(),t._v(" "),this.itemOrder.urgency+""=="3"?a("el-tag",{attrs:{type:"danger"}},[t._v("急B")]):t._e(),t._v(" "),this.itemOrder.urgency+""=="4"?a("el-tag",{attrs:{type:"primary"}},[t._v("急A")]):t._e(),t._v(" "),this.itemOrder.urgency+""=="5"?a("el-tag",{attrs:{type:"danger"}},[t._v("紧急C")]):t._e(),t._v(" "),this.itemOrder.urgency+""=="6"?a("el-tag",{attrs:{type:"primary"}},[t._v("紧急B")]):t._e(),t._v(" "),this.itemOrder.urgency+""=="7"?a("el-tag",{attrs:{type:"danger"}},[t._v("紧急A")]):t._e(),t._v(" "),this.itemOrder.urgency+""=="8"?a("el-tag",{attrs:{type:"danger"}},[t._v("特急")]):t._e()],1)])],1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("实际面积")])],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.ruleForm.realityArea))])])])],1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("倍数")])],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.ruleForm.beiShu))])])])],1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("是否有备忘")])],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[t.ruleForm.hasRemark?a("span",{staticClass:"msg-span"},[t._v("有")]):t._e(),t._v(" "),t.ruleForm.hasRemark?t._e():a("span",{staticClass:"msg-span"},[t._v("无")])])])],1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("备注")])],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"})])])],1)],1)])])],1)],1),t._v(" "),a("div",[a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[t._v("工艺卡信息")])],1),t._v(" "),this.itemOrder.techNum+""!="0"?a("el-tag",{attrs:{type:"warning"}},[t._v("有"+t._s(this.itemOrder.techNum)+"个工艺卡提交")]):t._e()],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[this.itemOrder.techCardList.length>0?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:this.itemOrder.techCardList,stripe:""}},[a("el-table-column",{attrs:{label:"纹理代码"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.piWenDaiMa))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"难度系数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.nanDuXiShu))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"贴花步数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tieHuaBuShu))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"工艺参数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.gongYiCanShu))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"添加人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.addUserName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDateTime")(e.row.createTime)))]}}])})],1):t._e()],1)])],1)],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.base_loading,expression:"base_loading"}]},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[t._v("控制单详情")])],1)]),t._v(" "),a("div",{staticClass:"text item"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{staticStyle:{"border-right":"1px dashed rgb(217, 217, 217)"},attrs:{span:8}},[a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("气孔")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.qiKong))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("缺口")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.queKou))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("裂缝")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.lieFeng))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("焊疤")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.hanBa))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("电火花")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.dianHuoHua))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("油丝石")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.youShiSi))])])])],1)],1),t._v(" "),a("el-col",{staticStyle:{"border-right":"1px dashed rgb(217, 217, 217)"},attrs:{span:8}},[a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("区域")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.quYu))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("同光泽处理区域")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[t.exform.tongGZ?a("span",{staticClass:"msg-span"},[t._v("有")]):t._e(),t._v(" "),t.exform.tongGZ?t._e():a("span",{staticClass:"msg-span"},[t._v("无")])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("最后试模件")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.zuiHouShiMoJian))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("CKD件")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.ckd))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("光件")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.guangJian))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("分型线光边")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.fenXingBian))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("合模线光边")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.heMoBian))])])])],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("深度")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.heMoBian))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("碰穿边")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.pengChuanBian))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("碰穿孔")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",{staticClass:"msg-span"},[t._v(t._s(t.exform.pengChuanBian))])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tag",{attrs:{type:"info"}},[t._v("备注")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"})])],1)],1)],1)],1)])],1)]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[t._v("模具详情")])],1)]),t._v(" "),a("div",[a("el-row",{attrs:{gutter:30}},t._l(t.select_part,function(e){return a("el-col",{attrs:{span:6}},[a("el-card",{staticClass:"mould-card",attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",staticStyle:{height:"260px"},attrs:{src:e.collectPartinfoEntity.picurl[0]}}),t._v(" "),a("div",{staticStyle:{padding:"14px"}},[a("h4",[t._v(t._s(e.collectPartinfoEntity.mouldName))]),t._v(" "),a("span",[t._v("备注："+t._s(e.collectPartinfoEntity.remark))]),t._v(" "),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[t._v(t._s(e.collectPartinfoEntity.createTime))])])])])],1)}))],1)])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"5px"}},[a("el-tag",{attrs:{type:"danger"}},[t._v("产品照片")])],1)]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},t._l(t.imageUrls,function(t){return a("el-col",{attrs:{span:6}},[a("el-card",{staticClass:"mould-card",attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",staticStyle:{height:"420px"},attrs:{src:t}})])],1)})),t._v(" "),a("div")],1)],1),t._v(" "),a("div",[a("el-dialog",{attrs:{width:"60%",title:"分配工作",visible:t.innerVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"elform",attrs:{model:t.elform,rules:t.rules,"label-width":"30%"}},[a("el-form-item",{attrs:{label:"选择加工流程：",prop:"productName"}},[a("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请输选择加工流程"},on:{change:t.test},model:{value:t.elform.flowId,callback:function(e){t.$set(t.elform,"flowId",e)},expression:"elform.flowId"}},t._l(t.restaurants3,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"选择质量监管人员：",prop:"qualityUsers"}},[a("el-select",{staticStyle:{width:"50%"},attrs:{multiple:"",placeholder:"选择质量监管人员："},model:{value:t.zhiliang,callback:function(e){t.zhiliang=e},expression:"zhiliang"}},t._l(t.restaurants5,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"选择加工人员：",prop:"wenlidaima"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.outerVisible=!0}}},[t._v("添加")])],1)],1),t._v(" "),a("div",{staticStyle:{border:"1px dashed #d9d9d9",width:"100%","min-height":"358px"}},[a("span",[t._v(t._s(t.selectFlow.flowName))]),t._v(" "),a("el-steps",{attrs:{"align-center":""}},t._l(t.selectFlow.stepslist,function(t){return a("el-step",{attrs:{title:t.stepName,description:t.remark}})})),t._v(" "),a("span",{staticStyle:{"margin-top":"10px"}},[t._v("工艺师列表")]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Ygas,border:""}},[a("el-table-column",{attrs:{prop:"orderNeedArea",label:"产品总面积"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"biLi",label:"面积比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.biLi)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"allTieHuaArea",label:"贴花总面积"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jingFengArea",label:"精封面积"}}),t._v(" "),a("el-table-column",{attrs:{prop:"oneceTieHuaArea",label:"每步贴花面积"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.deleteRow(e.$index,t.Ygas)}}},[t._v("\r\n           移除\r\n         ")])]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toFenPei}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.toQuXiao}},[t._v("取 消")])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"}),t._v(" "),a("el-dialog",{attrs:{width:"40%",title:"分配贴花面积",visible:t.outerVisible,"append-to-body":""},on:{"update:visible":function(e){t.outerVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"30%"}},[a("el-form-item",{attrs:{label:"选择工艺师:"}},[a("el-select",{attrs:{placeholder:"请选工艺师"},model:{value:t.itemYga,callback:function(e){t.itemYga=e},expression:"itemYga"}},t._l(t.restaurants4,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"贴花面积比例:"}},[a("el-select",{attrs:{placeholder:"请选择加工面积比例"},model:{value:t.form.biLi,callback:function(e){t.$set(t.form,"biLi",e)},expression:"form.biLi"}},[a("el-option",{attrs:{label:"10%",value:"10"}}),t._v(" "),a("el-option",{attrs:{label:"20%",value:"20"}}),t._v(" "),a("el-option",{attrs:{label:"30%",value:"30"}}),t._v(" "),a("el-option",{attrs:{label:"40%",value:"40"}}),t._v(" "),a("el-option",{attrs:{label:"50%",value:"50"}}),t._v(" "),a("el-option",{attrs:{label:"60%",value:"60"}}),t._v(" "),a("el-option",{attrs:{label:"70%",value:"70"}}),t._v(" "),a("el-option",{attrs:{label:"80%",value:"80"}}),t._v(" "),a("el-option",{attrs:{label:"90%",value:"90"}}),t._v(" "),a("el-option",{attrs:{label:"100%",value:"100"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.selectYga}},[t._v("确 定")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{title:"提交订单难度等级",visible:t.dialogFormVisible12},on:{"update:visible":function(e){t.dialogFormVisible12=e}}},[a("el-form",{attrs:{model:t.form1}},[a("el-form-item",{attrs:{label:"难度等级："}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form1.nanDuDengJi,callback:function(e){t.$set(t.form1,"nanDuDengJi",e)},expression:"form1.nanDuDengJi"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible12=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.nanDu}},[t._v("确 定")])],1)],1)],1)])],1)],1)])},staticRenderFns:[]};var l=a("Z0/y")(s,r,!1,function(t){a("baNU")},"data-v-22e06624",null);e.default=l.exports},FgEW:function(t,e){},JMJ2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{nowTab:1,username:"",name:"",uid:"",tableLoading:!1,currentPage:1,totalnum:0,pagesize:10,select_word:"",tableData:[]}},methods:{toinfo:function(t){this.$router.push("/order/info/"+t)},toadd:function(){this.$router.push("/order/add")},handleSizeChange:function(t){this.pagesize=t,this.getCollectMouldList()},handleCurrentChange:function(t){this.currentPage=t,this.getCollectMouldList()},getCollectMouldList:function(){var t=this,e=this;this.getRequest("/plant/over/listbypage?page="+this.currentPage+"&size="+this.pagesize).then(function(a){e.tableLoading=!1,a&&200==a.status&&0==a.data.code&&(t.tableData=a.data.data.overorderlist,t.totalnum=a.data.data.count)})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{data:function(){var t=this;return t.tableData.filter(function(e){if(e.orderName.indexOf(t.select_word)>-1||e.clientCompanyName.indexOf(t.select_word)>-1)return e})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),t._v("车间管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("已完成订单列表")])],1)],1),t._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}})],1)]),t._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.data,stripe:""}},[a("el-table-column",{attrs:{label:"产品名称",prop:"orderName"}}),t._v(" "),a("el-table-column",{attrs:{label:"紧急程度"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.urgency+""=="0"?a("el-tag",{attrs:{type:"primary"}},[t._v("一般")]):t._e(),t._v(" "),e.row.urgency+""=="1"?a("el-tag",{attrs:{type:"danger"}},[t._v("紧急")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"面积",prop:"realityArea"}}),t._v(" "),a("el-table-column",{attrs:{label:"完工日期",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDateTime")(e.row.createTime)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"下单日期",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDateTime")(e.row.createTime)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){}}},[t._v("查看详情")])]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,30,80,100],"page-size":t.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:t.totalnum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var l=a("Z0/y")(s,r,!1,function(t){a("rGv9")},"data-v-2fe07cad",null);e.default=l.exports},"M6+o":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{dialogTableVisible1:!1,itemTiaoZhen:{liuZhuanBiLi:"0",liuZhuanArea:"0"},itemYga:{},cxFenPei:!0,Ygas:[],restaurants4:[],form:{biLi:"",syTHBS:"1"},dialogTableVisible:!1,orderUsers:[],nowTab:1,username:"",name:"",uid:"",tableLoading:!1,currentPage:1,totalnum:0,pagesize:10,select_word:"",tableData:[]}},methods:{resetForm:function(t){this.$refs[t].resetFields()},toQuXiao:function(){this.dialogTableVisible=!1,this.Ygas=[],this.form={biLi:"",syTHBS:"1"},this.itemYga={}},deleteRow:function(t,e){e.splice(t,1)},toFenPei:function(){var t=this,e=this;if(0!=this.Ygas.length){var a={orderId:this.itemTiaoZhen.id,orderName:this.itemTiaoZhen.orderName,addUserId:this.uid,addUserName:this.name,ygas:this.Ygas};this.jsonPostRequest("/plant/liu/zhuan",a).then(function(a){if(a&&200==a.status&&0==a.data.code){e.$message.success("重新分配完成");var s=a.data.data,r=parseInt(t.itemTiaoZhen.liuZhuanBiLi)-parseInt(s);t.itemTiaoZhen.liuZhuanArea=r*workArea/100,t.itemTiaoZhen.liuZhuanBiLi=r,t.toQuXiao()}else e.$message.error("重新分配失败")})}else e.$message.error("至少分配一位工艺师")},selectYga:function(){var t=this.itemYga,e=this.Ygas,a=this.form.syTHBS,s=this.itemTiaoZhen.workArea,r=this.form.biLi;if(r<=0)this.$message.error("分配比例不能为零");else if(r>this.itemTiaoZhen.liuZhuanBiLi)this.$message.error("分配比例超出流转比例");else{var l={userId:"",userName:"",biLi:"",allTieHuaArea:"",oneceTieHuaArea:"",jingFengArea:"",orderNeedArea:""};if(e.length>0){for(var i=0;i<e.length;i++)if(e[i].userId===t.value)return void this.$message.error("该员工已添加");l.userId=t.value,l.userName=t.label,l.biLi=r,l.allTieHuaArea=.9*s*r/100,l.oneceTieHuaArea=.9*s*r/(100*a),l.jingFengArea=.1*s*r/100,l.orderNeedArea=s,this.Ygas.push(l)}else l.userId=t.value,l.userName=t.label,l.biLi=r,l.allTieHuaArea=.9*s*r/100,l.oneceTieHuaArea=.9*s*r/(100*a),l.jingFengArea=.1*s*r/100,l.orderNeedArea=s,this.Ygas.push(l);this.$message.success("添加成功"),this.itemYga={},this.form={}}},toJieSuan:function(t){var e=this;t.zongJiArea+""!=""+t.wanChengArea?this.$confirm("此操作将结算工艺师的加工面积, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.jieSuan(t)}).catch(function(){e.$message({type:"info",message:"已取消操作"})}):this.$message.info("加工已完成，无需结算")},jieSuan:function(t){var e=this;this.postRequest("/plant/jie/suan",t).then(function(t){if(t&&200==t.status&&0==t.data.code){var a=t.data.data;e.cxFenPei=!0,e.tiaoZheng(e.itemTiaoZhen);var s=e.itemTiaoZhen.workArea,r=parseInt(a)+parseInt(e.itemTiaoZhen.liuZhuanBiLi);e.itemTiaoZhen.liuZhuanArea=r*s/100,e.itemTiaoZhen.liuZhuanBiLi=r,e.$message.success("结算成功")}else e.$message.error("结算失败")})},tiaoZheng:function(t){var e=this;this.itemTiaoZhen=t;var a=t.id;this.getRequest("/plant/users?status=0&orderId="+a).then(function(t){t&&200==t.status&&0==t.data.code&&(e.orderUsers=t.data.data.orderusers,e.dialogTableVisible=!0,e.loadAllYuanGongA())})},loadAllYuanGongA:function(){var t=this;this.getRequest("/config/mangers?role=ROLE_yga").then(function(e){if(e&&200==e.status&&0==e.data.code){var a=[],s=e.data.data;if("undefined"!=s&&s.length>0){for(var r=0;r<s.length;r++){var l={label:"",value:""};l.label=s[r].name,l.value=s[r].id,a.push(l)}t.restaurants4=a}}else console.log("获取列表数据失败")})},toinfo:function(t){this.$router.push("/plant/order/info/"+t)},toadd:function(){this.$router.push("/order/add")},handleSizeChange:function(t){this.pagesize=t,this.getCollectMouldList()},handleCurrentChange:function(t){this.currentPage=t,this.getCollectMouldList()},getCollectMouldList:function(){var t=this;this.getRequest("/plant/new/order?page="+this.currentPage+"&size="+this.pagesize+"&userId="+this.uid+"&plantStatus=1").then(function(e){t.tableLoading=!1,e&&200==e.status&&0==e.data.code&&(t.tableData=e.data.data.orderlist,console.log(t.tableData),t.totalnum=e.data.data.count)})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{data:function(){var t=this;return t.tableData.filter(function(e){if(e.orderName.indexOf(t.select_word)>-1||e.clientCompanyName.indexOf(t.select_word)>-1)return e})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),t._v("车间管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("进行中订单列表")])],1)],1),t._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}})],1)]),t._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.data,stripe:""}},[a("el-table-column",{attrs:{label:"产品名称",prop:"orderName"}}),t._v(" "),a("el-table-column",{attrs:{label:"紧急程度"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.urgency+""=="0"?a("el-tag",{attrs:{type:"primary"}},[t._v("不急")]):t._e(),t._v(" "),e.row.urgency+""=="1"?a("el-tag",{attrs:{type:"danger"}},[t._v("正常")]):t._e(),t._v(" "),e.row.urgency+""=="2"?a("el-tag",{attrs:{type:"primary"}},[t._v("急C")]):t._e(),t._v(" "),e.row.urgency+""=="3"?a("el-tag",{attrs:{type:"danger"}},[t._v("急B")]):t._e(),t._v(" "),e.row.urgency+""=="4"?a("el-tag",{attrs:{type:"primary"}},[t._v("急A")]):t._e(),t._v(" "),e.row.urgency+""=="5"?a("el-tag",{attrs:{type:"danger"}},[t._v("紧急C")]):t._e(),t._v(" "),e.row.urgency+""=="6"?a("el-tag",{attrs:{type:"primary"}},[t._v("紧急B")]):t._e(),t._v(" "),e.row.urgency+""=="7"?a("el-tag",{attrs:{type:"danger"}},[t._v("紧急A")]):t._e(),t._v(" "),e.row.urgency+""=="8"?a("el-tag",{attrs:{type:"danger"}},[t._v("特急")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"质量总监"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.qualityOrderUsers,function(e){return a("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.userName))])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"工艺师"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.orderUsers,function(e){return a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.userName))])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当前步骤",prop:"presentStepName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.presentStepName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已完成面积",prop:"alreadyArea"}}),t._v(" "),a("el-table-column",{attrs:{label:"未完成面积",prop:"stayArea"}}),t._v(" "),a("el-table-column",{attrs:{label:"进度"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"info"}},[t._v(t._s(e.row.presentSchedule)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"完工预期",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDateTime")(e.row.createTime)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"下单日期",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDateTime")(e.row.createTime)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.tiaoZheng(e.row)}}},[t._v("调整")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.toinfo(e.row.id)}}},[t._v("详情")])]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,30,80,100],"page-size":t.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:t.totalnum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"订单分配详情",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.orderUsers}},[a("el-table-column",{attrs:{property:"orderName",label:"订单名称"}}),t._v(" "),a("el-table-column",{attrs:{property:"biLi",label:"分配比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.biLi)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"userName",label:"工艺师"}}),t._v(" "),a("el-table-column",{attrs:{property:"zongJiArea",label:"分配面积"}}),t._v(" "),a("el-table-column",{attrs:{property:"wanChengArea",label:"已完成面积"}}),t._v(" "),a("el-table-column",{attrs:{property:"shengYuArea",label:"未完成面积"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.toJieSuan(e.row)}}},[t._v("结 算")])]}}])})],1),t._v(" "),a("div",{staticStyle:{"border-top-style":"dotted","border-bottom-style":"dotted","margin-top":"40px"}},[a("p",[t._v(" 流转面积：\r\n        "),a("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.itemTiaoZhen.liuZhuanArea))]),t._v("\r\n        流转比例：\r\n        "),a("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.itemTiaoZhen.liuZhuanBiLi)+"%")])],1),t._v(" "),a("p",[t._v(" 重新分配面积比例：")]),t._v(" "),t.cxFenPei?a("el-form",{attrs:{model:t.form,"label-width":"30%"}},[a("el-form-item",{attrs:{label:"选择工艺师:"}},[a("el-select",{attrs:{placeholder:"请选工艺师"},model:{value:t.itemYga,callback:function(e){t.itemYga=e},expression:"itemYga"}},t._l(t.restaurants4,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"面积比例:"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.form.biLi,callback:function(e){t.$set(t.form,"biLi",e)},expression:"form.biLi"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"剩余贴花步数:"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:t.form.syTHBS,callback:function(e){t.$set(t.form,"syTHBS",e)},expression:"form.syTHBS"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.selectYga}},[t._v("确 定")])],1)],1):t._e()],1),t._v(" "),t.Ygas.length>0?a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.Ygas,border:""}},[a("el-table-column",{attrs:{prop:"orderNeedArea",label:"产品总面积"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"biLi",label:"面积比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.biLi)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"allTieHuaArea",label:"贴花总面积"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jingFengArea",label:"精封面积"}}),t._v(" "),a("el-table-column",{attrs:{prop:"oneceTieHuaArea",label:"每步贴花面积"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.deleteRow(e.$index,t.Ygas)}}},[t._v("移除\r\n")])]}}])})],1):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toFenPei}},[t._v("流转分配")]),t._v(" "),a("el-button",{on:{click:t.toQuXiao}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var l=a("Z0/y")(s,r,!1,function(t){a("jKtR")},"data-v-1bbc8ed7",null);e.default=l.exports},aX9G:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{form:{},itemOrder:{},nowTab:1,username:"",name:"",uid:"",dialogFormVisible:!1,tableLoading:!1,currentPage:1,totalnum:0,pagesize:10,select_word:"",tableData:[]}},methods:{toNanDu:function(t){this.dialogFormVisible=!0,this.itemOrder=t,this.form={}},nanDu:function(){var t=this,e={nanDuDengJi:this.form.nanDuDengJi,orderId:this.itemOrder.id};this.tableLoading=!0,this.postRequest("/plant/nan/du",e).then(function(e){t.tableLoading=!1,e&&200==e.status&&0==e.data.code?(t.$message.success("设置成功"),t.itemOrder.nanDuDengJi=t.form.nanDuDengJi,t.dialogFormVisible=!1):t.$message.error("设置失败")})},toinfo:function(t){this.$router.push("/plant/order/info/"+t)},toadd:function(){this.$router.push("/order/add")},handleSizeChange:function(t){this.pagesize=t,this.getCollectMouldList()},handleCurrentChange:function(t){this.currentPage=t,this.getCollectMouldList()},getCollectMouldList:function(){var t=this;this.getRequest("/plant/new/order?page="+this.currentPage+"&size="+this.pagesize+"&userId="+this.uid+"&plantStatus=0").then(function(e){t.tableLoading=!1,e&&200==e.status&&0==e.data.code&&(t.tableData=e.data.data.orderlist,t.totalnum=e.data.data.count)})}},mounted:function(){this.$nextTick(function(){this.tableLoading=!0,this.getCollectMouldList()}),this.username=localStorage.getItem("cp_username"),this.uid=localStorage.getItem("cp_uid"),this.name=localStorage.getItem("cp_name")},computed:{data:function(){var t=this;return t.tableData.filter(function(e){if(e.orderName.indexOf(t.select_word)>-1||e.clientCompanyName.indexOf(t.select_word)>-1)return e})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.nowTab,expression:"nowTab === 1"}]},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),t._v("车间管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("待分配订单列表")])],1)],1),t._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词",icon:"search"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}})],1)]),t._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.data,stripe:""}},[a("el-table-column",{attrs:{label:"产品名称",prop:"orderName"}}),t._v(" "),a("el-table-column",{attrs:{label:"项目名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.project.projectName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单位名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.project.processUnit.clientCompanyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"经办人",prop:"addUserName"}}),t._v(" "),a("el-table-column",{attrs:{label:"纹理代码"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.wenlis,function(e){return a("el-tag",{key:e.id,staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"mini","disable-transitions":!1}},[t._v(t._s(e.wenliName)+"\r\n                ")])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"紧急程度"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.urgency+""=="0"?a("el-tag",{attrs:{type:"primary"}},[t._v("不急")]):t._e(),t._v(" "),e.row.urgency+""=="1"?a("el-tag",{attrs:{type:"danger"}},[t._v("正常")]):t._e(),t._v(" "),e.row.urgency+""=="2"?a("el-tag",{attrs:{type:"primary"}},[t._v("急C")]):t._e(),t._v(" "),e.row.urgency+""=="3"?a("el-tag",{attrs:{type:"danger"}},[t._v("急B")]):t._e(),t._v(" "),e.row.urgency+""=="4"?a("el-tag",{attrs:{type:"primary"}},[t._v("急A")]):t._e(),t._v(" "),e.row.urgency+""=="5"?a("el-tag",{attrs:{type:"danger"}},[t._v("紧急C")]):t._e(),t._v(" "),e.row.urgency+""=="6"?a("el-tag",{attrs:{type:"primary"}},[t._v("紧急B")]):t._e(),t._v(" "),e.row.urgency+""=="7"?a("el-tag",{attrs:{type:"danger"}},[t._v("紧急A")]):t._e(),t._v(" "),e.row.urgency+""=="8"?a("el-tag",{attrs:{type:"danger"}},[t._v("特急")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"工艺卡状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.techId?t._e():a("el-tag",{attrs:{type:"danger"}},[t._v("未提交")]),t._v(" "),e.row.techId?a("el-tag",{attrs:{type:"primary"}},[t._v("已提交")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"加工面积",prop:"workArea"}}),t._v(" "),a("el-table-column",{attrs:{label:"难度等级",prop:"nanDuDengJi"}}),t._v(" "),a("el-table-column",{attrs:{label:"完工预期",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDate")(e.row.expectedTime)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"下单日期",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDateTime")(e.row.createTime)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.toinfo(e.row.id)}}},[t._v("详情")]),t._v(" "),e.row.techId&&e.row.nanDuDengJi+""!="待设定"?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.toinfo(e.row.id)}}},[t._v("加工分配")]):t._e()]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right","margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,30,80,100],"page-size":t.pagesize,layout:"total,sizes, prev, pager, next, jumper",total:t.totalnum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{title:"提交订单难度等级",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"难度等级："}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.nanDuDengJi,callback:function(e){t.$set(t.form,"nanDuDengJi",e)},expression:"form.nanDuDengJi"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.nanDu}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=a("Z0/y")(s,r,!1,function(t){a("FgEW")},"data-v-3c441b26",null);e.default=l.exports},baNU:function(t,e){},jKtR:function(t,e){},rGv9:function(t,e){},wlKU:function(t,e,a){var s={"./PlantMaOrder.vue":"M6+o","./PlantNewOrder.vue":"aX9G","./PlantOrderInfo.vue":"5hjX","./PlantOverOrder.vue":"JMJ2"};function r(t){return a(l(t))}function l(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}r.keys=function(){return Object.keys(s)},r.resolve=l,t.exports=r,r.id="wlKU"}});
//# sourceMappingURL=7.e7aa264dbb69a71ca05d.js.map